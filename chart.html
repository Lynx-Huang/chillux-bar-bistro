<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POC ç³»çµ±å®Œæ•´æ–‡æª”</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', 'PingFang TC', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .nav-container {
            background: #f8f9fa;
            padding: 20px;
            border-bottom: 2px solid #e9ecef;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }

        .nav-btn {
            padding: 12px 24px;
            background: white;
            border: 2px solid #667eea;
            color: #667eea;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .nav-btn.active {
            background: #667eea;
            color: white;
        }

        .content {
            padding: 40px;
        }

        .diagram-section {
            margin-bottom: 60px;
            display: none;
        }

        .diagram-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .diagram-title {
            font-size: 2em;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        .diagram-subtitle {
            font-size: 1.3em;
            color: #555;
            margin: 30px 0 20px 0;
            padding-left: 15px;
            border-left: 4px solid #764ba2;
        }

        .diagram-container {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            overflow-x: auto;
        }

        .diagram-container svg {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 0 auto;
        }

        /* æ–°å¢æ¨£å¼ï¼šè³‡æ–™æ ¼å¼ç›¸é—œ */
        .data-format-container {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .interface-block {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
            border-left: 5px solid #667eea;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .interface-title {
            font-size: 1.4em;
            color: #2c3e50;
            margin-bottom: 15px;
            font-family: 'Consolas', 'Monaco', monospace;
        }

        .enum-values {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }

        .enum-item {
            background: #e3f2fd;
            padding: 10px 15px;
            border-radius: 8px;
            border-left: 3px solid #2196f3;
        }

        .enum-name {
            font-weight: bold;
            color: #1976d2;
            font-family: 'Consolas', 'Monaco', monospace;
        }

        .enum-description {
            color: #555;
            font-size: 0.9em;
            margin-top: 5px;
        }

        .property-list {
            margin: 15px 0;
        }

        .property-item {
            background: #f5f5f5;
            padding: 12px 15px;
            margin: 8px 0;
            border-radius: 8px;
            border-left: 3px solid #4caf50;
        }

        .property-name {
            font-weight: bold;
            color: #2e7d32;
            font-family: 'Consolas', 'Monaco', monospace;
        }

        .property-type {
            color: #1976d2;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
        }

        .property-description {
            color: #555;
            margin-top: 5px;
            font-size: 0.9em;
        }

        .example-block {
            background: #263238;
            color: #e8eaf6;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
            overflow-x: auto;
        }

        .example-title {
            color: #81c784;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        /* æµç¨‹èªªæ˜æ¨£å¼ */
        .process-section {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
            border-left: 5px solid #ff9800;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .process-title {
            font-size: 1.3em;
            color: #e65100;
            margin-bottom: 15px;
        }

        .process-steps {
            counter-reset: step-counter;
            margin: 15px 0;
        }

        .process-step {
            counter-increment: step-counter;
            background: #fff3e0;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 3px solid #ff9800;
            position: relative;
        }

        .process-step::before {
            content: counter(step-counter);
            position: absolute;
            left: -25px;
            top: 15px;
            background: #ff9800;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9em;
        }

        .code-inline {
            background: #e8f5e8;
            color: #2e7d32;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
        }

        .strategy-block {
            background: #e8f5e8;
            border-left: 5px solid #4caf50;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
        }

        .strategy-title {
            color: #2e7d32;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .legend {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 20px;
            margin: 30px 0;
            border-radius: 10px;
        }

        .legend h4 {
            color: #856404;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .legend-items {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .color-box {
            width: 30px;
            height: 30px;
            border-radius: 5px;
            border: 2px solid #ddd;
        }

        .footer {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 20px;
        }

        @media (max-width: 768px) {
            .header h1 { font-size: 1.8em; }
            .content { padding: 20px; }
            .nav-btn { font-size: 12px; padding: 10px 16px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“‹ POC ç³»çµ±å®Œæ•´æ–‡æª”</h1>
            <p>éŸ³è¨ŠéŒ„è£½èˆ‡ WebSocket å³æ™‚å‚³è¼¸ç³»çµ± - è³‡æ–™æ ¼å¼ã€æµç¨‹èˆ‡è¦–è¦ºåŒ–æ–‡æª”</p>
        </div>

        <div class="nav-container">
            <div class="nav-buttons">
                <button class="nav-btn active" onclick="showSection(0)">ğŸ“Š è³‡æ–™æ ¼å¼</button>
                <button class="nav-btn" onclick="showSection(1)">ğŸ”„ æµç¨‹èªªæ˜</button>
                <button class="nav-btn" onclick="showSection(2)">ğŸ¯ é—œéµç­–ç•¥</button>
                <button class="nav-btn" onclick="showSection(3)">ğŸ—ï¸ ç³»çµ±æ¶æ§‹</button>
                <button class="nav-btn" onclick="showSection(4)">ğŸ™ï¸ éŒ„è£½æµç¨‹</button>
                <button class="nav-btn" onclick="showSection(5)">ğŸŒ WebSocket</button>
                <button class="nav-btn" onclick="showSection(6)">ğŸ“¦ Chunk è™•ç†</button>
                <button class="nav-btn" onclick="showSection(7)">â¯ï¸ æš«åœæ¢å¾©</button>
                <button class="nav-btn" onclick="showSection(8)">ğŸ”„ æ–·ç·šé‡é€£</button>
                <button class="nav-btn" onclick="showSection(9)">ğŸµ éŸ³è¨Šåˆä½µ</button>
                <button class="nav-btn" onclick="showSection(10)">ğŸ‘¤ ä½¿ç”¨è€…æ“ä½œ</button>
            </div>
        </div>

        <div class="content">
            <!-- Section 0: è³‡æ–™æ ¼å¼å®šç¾© -->
            <div class="diagram-section active">
                <h2 class="diagram-title">ğŸ“Š è³‡æ–™æ ¼å¼å®šç¾©</h2>
                
                <!-- Enums -->
                <h3 class="diagram-subtitle">ğŸ·ï¸ æšèˆ‰é¡å‹</h3>
                
                <div class="interface-block">
                    <div class="interface-title">WebSocketConnectionState</div>
                    <div class="enum-values">
                        <div class="enum-item">
                            <div class="enum-name">DISCONNECTED = 'disconnected'</div>
                            <div class="enum-description">WebSocket æœªé€£ç·šç‹€æ…‹</div>
                        </div>
                        <div class="enum-item">
                            <div class="enum-name">CONNECTING = 'connecting'</div>
                            <div class="enum-description">æ­£åœ¨å»ºç«‹é€£ç·šä¸­</div>
                        </div>
                        <div class="enum-item">
                            <div class="enum-name">CONNECTED = 'connected'</div>
                            <div class="enum-description">å·²æˆåŠŸé€£ç·š</div>
                        </div>
                        <div class="enum-item">
                            <div class="enum-name">RECONNECTING = 'reconnecting'</div>
                            <div class="enum-description">é‡æ–°é€£ç·šä¸­</div>
                        </div>
                    </div>
                </div>

                <div class="interface-block">
                    <div class="interface-title">AudioChunkStatus</div>
                    <div class="enum-values">
                        <div class="enum-item">
                            <div class="enum-name">PENDING = 'PENDING'</div>
                            <div class="enum-description">éŸ³è¨Šå¡Šå¾…ç™¼é€ç‹€æ…‹</div>
                        </div>
                        <div class="enum-item">
                            <div class="enum-name">SENT = 'SENT'</div>
                            <div class="enum-description">å·²ç™¼é€è‡³ä¼ºæœå™¨</div>
                        </div>
                        <div class="enum-item">
                            <div class="enum-name">RECEIVED = 'RECEIVED'</div>
                            <div class="enum-description">ä¼ºæœå™¨ç¢ºèªæ¥æ”¶</div>
                        </div>
                        <div class="enum-item">
                            <div class="enum-name">PROCESSED = 'PROCESSED'</div>
                            <div class="enum-description">ä¼ºæœå™¨è™•ç†å®Œæˆ</div>
                        </div>
                        <div class="enum-item">
                            <div class="enum-name">ERROR = 'ERROR'</div>
                            <div class="enum-description">è™•ç†éç¨‹ç™¼ç”ŸéŒ¯èª¤</div>
                        </div>
                    </div>
                </div>

                <div class="interface-block">
                    <div class="interface-title">RecordingState</div>
                    <div class="enum-values">
                        <div class="enum-item">
                            <div class="enum-name">IDLE = 'idle'</div>
                            <div class="enum-description">éŒ„éŸ³å™¨é–’ç½®ç‹€æ…‹</div>
                        </div>
                        <div class="enum-item">
                            <div class="enum-name">RECORDING = 'recording'</div>
                            <div class="enum-description">æ­£åœ¨éŒ„éŸ³ä¸­</div>
                        </div>
                        <div class="enum-item">
                            <div class="enum-name">PAUSED = 'paused'</div>
                            <div class="enum-description">éŒ„éŸ³å·²æš«åœ</div>
                        </div>
                        <div class="enum-item">
                            <div class="enum-name">STOPPING = 'stopping'</div>
                            <div class="enum-description">æ­£åœ¨åœæ­¢éŒ„éŸ³</div>
                        </div>
                    </div>
                </div>

                <!-- Interfaces -->
                <h3 class="diagram-subtitle">ğŸ—ï¸ ä»‹é¢å®šç¾©</h3>

                <div class="interface-block">
                    <div class="interface-title">AudioChunk</div>
                    <div class="property-list">
                        <div class="property-item">
                            <div class="property-name">id: <span class="property-type">string</span></div>
                            <div class="property-description">éŸ³è¨Šå¡Šå”¯ä¸€è­˜åˆ¥ç¢¼ï¼Œç”¨æ–¼è¿½è¹¤å’Œé—œè¯</div>
                        </div>
                        <div class="property-item">
                            <div class="property-name">sequenceNumber: <span class="property-type">number</span></div>
                            <div class="property-description">é †åºç·¨è™Ÿï¼Œç¢ºä¿éŸ³è¨ŠæŒ‰åºåˆä½µ</div>
                        </div>
                        <div class="property-item">
                            <div class="property-name">data: <span class="property-type">string</span></div>
                            <div class="property-description">Base64 ç·¨ç¢¼çš„éŸ³è¨Šæ•¸æ“š</div>
                        </div>
                        <div class="property-item">
                            <div class="property-name">status: <span class="property-type">AudioChunkStatus</span></div>
                            <div class="property-description">ç•¶å‰è™•ç†ç‹€æ…‹</div>
                        </div>
                        <div class="property-item">
                            <div class="property-name">timestamp: <span class="property-type">number</span></div>
                            <div class="property-description">å‰µå»ºæ™‚é–“æˆ³è¨˜ï¼ˆæ¯«ç§’ï¼‰</div>
                        </div>
                        <div class="property-item">
                            <div class="property-name">duration: <span class="property-type">number</span></div>
                            <div class="property-description">éŸ³è¨Šå¯¦éš›æ™‚é•·ï¼ˆç§’ï¼‰</div>
                        </div>
                        <div class="property-item">
                            <div class="property-name">taskId: <span class="property-type">string</span></div>
                            <div class="property-description">ä»»å‹™è­˜åˆ¥ç¢¼ï¼Œé—œè¯éŒ„éŸ³æœƒè©±</div>
                        </div>
                        <div class="property-item">
                            <div class="property-name">format: <span class="property-type">string</span></div>
                            <div class="property-description">éŸ³è¨Šæ ¼å¼ï¼ˆwebm/wavï¼‰</div>
                        </div>
                        <div class="property-item">
                            <div class="property-name">metadata?: <span class="property-type">object</span></div>
                            <div class="property-description">é¡å¤–è³‡è¨Šï¼šisPartialï¼ˆæ˜¯å¦ç‚ºéƒ¨åˆ†éŸ³è¨Šå¡Šï¼‰ã€sampleRateï¼ˆæ¡æ¨£ç‡ï¼‰ã€channelsï¼ˆè²é“æ•¸ï¼‰</div>
                        </div>
                    </div>

                    <div class="example-block">
                        <div class="example-title">ğŸ“„ ç¯„ä¾‹è³‡æ–™ï¼š</div>
                        <pre>{
  "id": "chunk_1732012345678_abc123",
  "sequenceNumber": 1,
  "data": "data:audio/webm;codecs=opus;base64,UklGRiQ...",
  "status": "SENT",
  "timestamp": 1732012345678,
  "duration": 3.0,
  "taskId": "task_1732012340000_xyz789",
  "format": "webm",
  "metadata": {
    "isPartial": false,
    "sampleRate": 48000,
    "channels": 1
  }
}</pre>
                    </div>
                </div>

                <div class="interface-block">
                    <div class="interface-title">WebSocketMessage</div>
                    <div class="property-list">
                        <div class="property-item">
                            <div class="property-name">type: <span class="property-type">string</span></div>
                            <div class="property-description">è¨Šæ¯é¡å‹è­˜åˆ¥</div>
                        </div>
                        <div class="property-item">
                            <div class="property-name">timestamp: <span class="property-type">string</span></div>
                            <div class="property-description">ä¼ºæœå™¨æ™‚é–“æˆ³è¨˜</div>
                        </div>
                        <div class="property-item">
                            <div class="property-name">clientId: <span class="property-type">string</span></div>
                            <div class="property-description">å®¢æˆ¶ç«¯è­˜åˆ¥ç¢¼</div>
                        </div>
                        <div class="property-item">
                            <div class="property-name">data?: <span class="property-type">any</span></div>
                            <div class="property-description">è¨Šæ¯å…§å®¹è³‡æ–™</div>
                        </div>
                    </div>

                    <div class="example-block">
                        <div class="example-title">ğŸ“„ ç¯„ä¾‹è³‡æ–™ï¼š</div>
                        <pre>{
  "type": "frontend-audio-chunk",
  "timestamp": "2024-11-19T10:30:00.000Z",
  "clientId": "client_1732012340000_abc123",
  "data": {
    "chunk": { /* AudioChunk ç‰©ä»¶ */ },
    "taskId": "task_1732012340000_xyz789"
  }
}</pre>
                    </div>
                </div>

                <div class="interface-block">
                    <div class="interface-title">ConnectionStats</div>
                    <div class="property-list">
                        <div class="property-item">
                            <div class="property-name">reconnectCount: <span class="property-type">number</span></div>
                            <div class="property-description">é‡é€£æ¬¡æ•¸çµ±è¨ˆ</div>
                        </div>
                        <div class="property-item">
                            <div class="property-name">connectionState: <span class="property-type">WebSocketConnectionState</span></div>
                            <div class="property-description">ç•¶å‰é€£ç·šç‹€æ…‹</div>
                        </div>
                        <div class="property-item">
                            <div class="property-name">lastError: <span class="property-type">string | null</span></div>
                            <div class="property-description">æœ€å¾Œç™¼ç”Ÿçš„éŒ¯èª¤</div>
                        </div>
                        <div class="property-item">
                            <div class="property-name">uptime: <span class="property-type">number</span></div>
                            <div class="property-description">é€£ç·šæŒçºŒæ™‚é–“ï¼ˆæ¯«ç§’ï¼‰</div>
                        </div>
                        <div class="property-item">
                            <div class="property-name">isAutoReconnectEnabled: <span class="property-type">boolean</span></div>
                            <div class="property-description">æ˜¯å¦å•Ÿç”¨è‡ªå‹•é‡é€£</div>
                        </div>
                        <div class="property-item">
                            <div class="property-name">heartbeatInterval: <span class="property-type">number</span></div>
                            <div class="property-description">å¿ƒè·³é–“éš”æ™‚é–“ï¼ˆæ¯«ç§’ï¼‰</div>
                        </div>
                        <div class="property-item">
                            <div class="property-name">lastHeartbeatTime: <span class="property-type">number</span></div>
                            <div class="property-description">æœ€å¾Œå¿ƒè·³æ™‚é–“æˆ³è¨˜</div>
                        </div>
                    </div>

                    <div class="example-block">
                        <div class="example-title">ğŸ“„ ç¯„ä¾‹è³‡æ–™ï¼š</div>
                        <pre>{
  "reconnectCount": 3,
  "connectionState": "connected",
  "lastError": null,
  "uptime": 125000,
  "isAutoReconnectEnabled": true,
  "heartbeatInterval": 5000,
  "lastHeartbeatTime": 1732012345678
}</pre>
                    </div>
                </div>

                <div class="interface-block">
                    <div class="interface-title">EventRecord</div>
                    <div class="property-list">
                        <div class="property-item">
                            <div class="property-name">id: <span class="property-type">string</span></div>
                            <div class="property-description">äº‹ä»¶å”¯ä¸€è­˜åˆ¥ç¢¼</div>
                        </div>
                        <div class="property-item">
                            <div class="property-name">timestamp: <span class="property-type">string</span></div>
                            <div class="property-description">äº‹ä»¶ç™¼ç”Ÿæ™‚é–“</div>
                        </div>
                        <div class="property-item">
                            <div class="property-name">action: <span class="property-type">string</span></div>
                            <div class="property-description">äº‹ä»¶å‹•ä½œé¡å‹</div>
                        </div>
                        <div class="property-item">
                            <div class="property-name">status: <span class="property-type">AudioChunkStatus</span></div>
                            <div class="property-description">äº‹ä»¶ç‹€æ…‹</div>
                        </div>
                        <div class="property-item">
                            <div class="property-name">details: <span class="property-type">string</span></div>
                            <div class="property-description">äº‹ä»¶è©³ç´°æè¿°</div>
                        </div>
                        <div class="property-item">
                            <div class="property-name">metadata?: <span class="property-type">Record&lt;string, any&gt;</span></div>
                            <div class="property-description">é¡å¤–è³‡è¨Š</div>
                        </div>
                        <div class="property-item">
                            <div class="property-name">chunkId?: <span class="property-type">string</span></div>
                            <div class="property-description">é—œè¯çš„éŸ³è¨Šå¡Š ID</div>
                        </div>
                    </div>

                    <div class="example-block">
                        <div class="example-title">ğŸ“„ ç¯„ä¾‹è³‡æ–™ï¼š</div>
                        <pre>{
  "id": "event_1732012345678_def456",
  "timestamp": "2024-11-19T10:30:00.000Z",
  "action": "chunk_sent",
  "status": "SENT",
  "details": "Audio chunk sent successfully",
  "metadata": {
    "chunkSize": 64796,
    "duration": 3.0
  },
  "chunkId": "chunk_1732012345678_abc123"
}</pre>
                    </div>
                </div>
            </div>

            <!-- Section 1: æµç¨‹èªªæ˜ -->
            <div class="diagram-section">
                <h2 class="diagram-title">ğŸ”„ æµç¨‹èªªæ˜</h2>
                
                <div class="process-section">
                    <div class="process-title">1. WebSocket é€£ç·šæµç¨‹</div>
                    
                    <h4 style="color: #555; margin: 20px 0 10px 0;">åˆå§‹é€£ç·š</h4>
                    <div class="process-steps">
                        <div class="process-step">
                            <strong>ç‹€æ…‹æª¢æŸ¥ï¼š</strong>æª¢æŸ¥ <span class="code-inline">ConnectionStats.connectionState</span>
                        </div>
                        <div class="process-step">
                            <strong>ç‹€æ…‹è®Šæ›´ï¼š</strong><span class="code-inline">connectionState</span> å¾ <code>DISCONNECTED</code> â†’ <code>CONNECTING</code>
                        </div>
                        <div class="process-step">
                            <strong>é€£ç·šå»ºç«‹ï¼š</strong>WebSocket æ¡æ‰‹æˆåŠŸå¾Œ <span class="code-inline">connectionState</span> â†’ <code>CONNECTED</code>
                        </div>
                        <div class="process-step">
                            <strong>å¿ƒè·³å•Ÿå‹•ï¼š</strong>æ ¹æ“š <span class="code-inline">ConnectionStats.heartbeatInterval</span> é–‹å§‹å®šæœŸå¿ƒè·³
                        </div>
                    </div>

                    <h4 style="color: #555; margin: 20px 0 10px 0;">æ–·ç·šé‡é€£</h4>
                    <div class="process-steps">
                        <div class="process-step">
                            <strong>æ–·ç·šæª¢æ¸¬ï¼š</strong>å¿ƒè·³å¤±æ•—æˆ–é€£ç·šä¸­æ–·ï¼Œ<span class="code-inline">connectionState</span> â†’ <code>RECONNECTING</code>
                        </div>
                        <div class="process-step">
                            <strong>é‡é€£è¨ˆæ•¸ï¼š</strong><span class="code-inline">ConnectionStats.reconnectCount</span> ç´¯åŠ 
                        </div>
                        <div class="process-step">
                            <strong>é‡é€£ç­–ç•¥ï¼š</strong>æª¢æŸ¥ <span class="code-inline">ConnectionStats.isAutoReconnectEnabled</span> æ±ºå®šæ˜¯å¦è‡ªå‹•é‡é€£
                        </div>
                        <div class="process-step">
                            <strong>é‡é€£æˆåŠŸï¼š</strong><span class="code-inline">connectionState</span> â†’ <code>CONNECTED</code>ï¼Œ<span class="code-inline">reconnectCount</span> é‡ç½®ç‚º 0
                        </div>
                    </div>
                </div>

                <div class="process-section">
                    <div class="process-title">2. éŸ³è¨ŠéŒ„è£½æµç¨‹</div>
                    
                    <h4 style="color: #555; margin: 20px 0 10px 0;">é–‹å§‹éŒ„éŸ³</h4>
                    <div class="process-steps">
                        <div class="process-step">
                            <strong>ç‹€æ…‹æª¢æŸ¥ï¼š</strong>ç¢ºèª <span class="code-inline">RecordingState</span> ç‚º <code>IDLE</code>
                        </div>
                        <div class="process-step">
                            <strong>ç‹€æ…‹è®Šæ›´ï¼š</strong><span class="code-inline">RecordingState</span> â†’ <code>RECORDING</code>
                        </div>
                        <div class="process-step">
                            <strong>éŸ³è¨Šæ•ç²ï¼š</strong>é–‹å§‹ MediaRecorderï¼Œæ¯ 3 ç§’è§¸ç™¼ chunk ç”¢ç”Ÿ
                        </div>
                        <div class="process-step">
                            <strong>Chunk å‰µå»ºï¼š</strong>ç”¢ç”Ÿæ–°çš„ <span class="code-inline">AudioChunk</span>ï¼Œåˆå§‹ <span class="code-inline">status</span> ç‚º <code>PENDING</code>
                        </div>
                    </div>

                    <h4 style="color: #555; margin: 20px 0 10px 0;">Chunk è™•ç†</h4>
                    <div class="process-steps">
                        <div class="process-step">
                            <strong>ç™¼é€æº–å‚™ï¼š</strong><span class="code-inline">AudioChunk.status</span> å¾ <code>PENDING</code> â†’ <code>SENT</code>
                        </div>
                        <div class="process-step">
                            <strong>WebSocket ç™¼é€ï¼š</strong>é€é <span class="code-inline">WebSocketMessage</span> åŒ…è£ç™¼é€
                        </div>
                        <div class="process-step">
                            <strong>ä¼ºæœå™¨ç¢ºèªï¼š</strong>æ”¶åˆ° ACK å¾Œ <span class="code-inline">status</span> â†’ <code>RECEIVED</code>
                        </div>
                        <div class="process-step">
                            <strong>è™•ç†å®Œæˆï¼š</strong>ä¼ºæœå™¨è™•ç†å®Œæˆå¾Œ <span class="code-inline">status</span> â†’ <code>PROCESSED</code>
                        </div>
                    </div>

                    <h4 style="color: #555; margin: 20px 0 10px 0;">æš«åœéŒ„éŸ³</h4>
                    <div class="process-steps">
                        <div class="process-step">
                            <strong>ç‹€æ…‹è®Šæ›´ï¼š</strong><span class="code-inline">RecordingState</span> â†’ <code>PAUSED</code>
                        </div>
                        <div class="process-step">
                            <strong>å¼·åˆ¶è¼¸å‡ºï¼š</strong>ç«‹å³å‰µå»ºç•¶å‰ chunkï¼Œ<span class="code-inline">metadata.isPartial</span> è¨­ç‚º <code>true</code>
                        </div>
                        <div class="process-step">
                            <strong>åºè™Ÿä¿æŒï¼š</strong><span class="code-inline">AudioChunk.sequenceNumber</span> ä¸é‡ç½®ï¼Œä¿æŒé€£çºŒæ€§
                        </div>
                    </div>

                    <h4 style="color: #555; margin: 20px 0 10px 0;">ç¹¼çºŒéŒ„éŸ³</h4>
                    <div class="process-steps">
                        <div class="process-step">
                            <strong>ç‹€æ…‹æª¢æŸ¥ï¼š</strong>ç¢ºèª <span class="code-inline">RecordingState</span> ç‚º <code>PAUSED</code>
                        </div>
                        <div class="process-step">
                            <strong>ç‹€æ…‹è®Šæ›´ï¼š</strong><span class="code-inline">RecordingState</span> â†’ <code>RECORDING</code>
                        </div>
                        <div class="process-step">
                            <strong>åºè™Ÿå»¶çºŒï¼š</strong>æ–° chunk çš„ <span class="code-inline">sequenceNumber</span> å¾ä¸Šæ¬¡ç¹¼çºŒç´¯åŠ 
                        </div>
                    </div>
                </div>

                <div class="process-section">
                    <div class="process-title">3. æ–·ç·šè™•ç†æµç¨‹</div>
                    
                    <h4 style="color: #555; margin: 20px 0 10px 0;">Pending Queue æ©Ÿåˆ¶</h4>
                    <div class="process-steps">
                        <div class="process-step">
                            <strong>æ–·ç·šæª¢æ¸¬ï¼š</strong><span class="code-inline">ConnectionStats.connectionState</span> â†’ <code>RECONNECTING</code>
                        </div>
                        <div class="process-step">
                            <strong>Queue æš«å­˜ï¼š</strong>æ–°ç”¢ç”Ÿçš„ chunk ä¿æŒ <span class="code-inline">status</span> ç‚º <code>PENDING</code>
                        </div>
                        <div class="process-step">
                            <strong>é‡é€£æˆåŠŸï¼š</strong><span class="code-inline">connectionState</span> â†’ <code>CONNECTED</code>
                        </div>
                        <div class="process-step">
                            <strong>Queue é‡ç™¼ï¼š</strong>æ‰€æœ‰ <span class="code-inline">status</span> ç‚º <code>PENDING</code> çš„ chunk é‡æ–°ç™¼é€
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 2: é—œéµç­–ç•¥ -->
            <div class="diagram-section">
                <h2 class="diagram-title">ğŸ¯ é—œéµç­–ç•¥</h2>
                
                <div class="strategy-block">
                    <div class="strategy-title">1. é€£ç·šç‹€æ…‹åˆ¤æ–·ç­–ç•¥</div>
                    <p><strong>åˆ¤æ–·ä¾æ“šï¼š</strong><span class="code-inline">ConnectionStats.connectionState</span></p>
                    
                    <div style="margin: 15px 0;">
                        <div style="margin: 8px 0;"><strong>â€¢ å…è¨±éŒ„éŸ³ï¼š</strong><span class="code-inline">connectionState === 'CONNECTED'</span></div>
                        <div style="margin: 8px 0;"><strong>â€¢ é¡¯ç¤ºé‡é€£ï¼š</strong><span class="code-inline">connectionState === 'RECONNECTING'</span></div>
                        <div style="margin: 8px 0;"><strong>â€¢ ç¦ç”¨åŠŸèƒ½ï¼š</strong><span class="code-inline">connectionState === 'DISCONNECTED'</span></div>
                    </div>

                    <div class="example-block">
                        <div class="example-title">ğŸ”§ é—œéµé‚è¼¯ï¼š</div>
                        <pre>// æŒ‰éˆ•å•Ÿç”¨åˆ¤æ–·
const canStartRecording = computed(() => 
  connectionStats.connectionState === 'CONNECTED' && 
  recordingState.value === 'IDLE'
)

// è‡ªå‹•é‡é€£è§¸ç™¼
if (connectionStats.connectionState === 'DISCONNECTED' && 
    connectionStats.isAutoReconnectEnabled) {
  // è§¸ç™¼é‡é€£é‚è¼¯
}</pre>
                    </div>
                </div>

                <div class="strategy-block">
                    <div class="strategy-title">2. éŸ³è¨Š Chunk ç‹€æ…‹ç®¡ç†ç­–ç•¥</div>
                    <p><strong>ç‹€æ…‹è½‰æ›åˆ¤æ–·ï¼š</strong><span class="code-inline">AudioChunk.status</span></p>
                    
                    <div style="margin: 15px 0;">
                        <div style="margin: 8px 0;"><strong>â€¢ å¯é‡ç™¼åˆ¤æ–·ï¼š</strong><span class="code-inline">status === 'PENDING' || status === 'ERROR'</span></div>
                        <div style="margin: 8px 0;"><strong>â€¢ å®Œæˆåˆ¤æ–·ï¼š</strong><span class="code-inline">status === 'PROCESSED'</span></div>
                        <div style="margin: 8px 0;"><strong>â€¢ çµ±è¨ˆè¨ˆç®—ï¼š</strong>æ ¹æ“šå„ç‹€æ…‹çš„ chunk æ•¸é‡</div>
                    </div>

                    <div class="example-block">
                        <div class="example-title">ğŸ”§ é—œéµé‚è¼¯ï¼š</div>
                        <pre>// Pending Queue é‡ç™¼
const pendingChunks = chunkHistory.filter(chunk => 
  chunk.status === 'PENDING' || chunk.status === 'ERROR'
)

// å®Œæˆç‡è¨ˆç®—
const completionRate = processedChunks.length / totalChunks.length</pre>
                    </div>
                </div>

                <div class="strategy-block">
                    <div class="strategy-title">3. åºè™Ÿé€£çºŒæ€§ä¿è­‰ç­–ç•¥</div>
                    <p><strong>åˆ¤æ–·ä¾æ“šï¼š</strong><span class="code-inline">RecordingState</span> å’Œ <span class="code-inline">AudioChunk.sequenceNumber</span></p>
                    
                    <div style="margin: 15px 0;">
                        <div style="margin: 8px 0;"><strong>â€¢ æ–°æœƒè©±ï¼š</strong><span class="code-inline">RecordingState === 'IDLE'</span> æ™‚é‡ç½®åºè™Ÿç‚º 0</div>
                        <div style="margin: 8px 0;"><strong>â€¢ æš«åœæ¢å¾©ï¼š</strong><span class="code-inline">RecordingState === 'PAUSED'</span> æ™‚ä¿æŒåºè™Ÿ</div>
                        <div style="margin: 8px 0;"><strong>â€¢ åºè™Ÿåˆ†é…ï¼š</strong>æ¯å€‹æ–° chunk çš„ <span class="code-inline">sequenceNumber = ++chunkCounter</span></div>
                    </div>

                    <div class="example-block">
                        <div class="example-title">ğŸ”§ é—œéµé‚è¼¯ï¼š</div>
                        <pre>// åºè™Ÿç®¡ç†
if (recordingState === RecordingState.IDLE) {
  chunkCounter = 0  // æ–°æœƒè©±é‡ç½®
} else {
  // æš«åœæ¢å¾©æ™‚ä¿æŒ chunkCounter ä¸è®Š
}

// æ–° chunk åºè™Ÿ
const newChunk: AudioChunk = {
  sequenceNumber: ++chunkCounter,  // é€£çºŒéå¢
  // ... å…¶ä»–å±¬æ€§
}</pre>
                    </div>
                </div>

                <div class="strategy-block">
                    <div class="strategy-title">4. å¿ƒè·³æ©Ÿåˆ¶ç­–ç•¥</div>
                    <p><strong>åˆ¤æ–·ä¾æ“šï¼š</strong><span class="code-inline">ConnectionStats.heartbeatInterval</span> å’Œ <span class="code-inline">lastHeartbeatTime</span></p>
                    
                    <div style="margin: 15px 0;">
                        <div style="margin: 8px 0;"><strong>â€¢ ç™¼é€é€±æœŸï¼š</strong>æ¯ <span class="code-inline">heartbeatInterval</span> æ¯«ç§’ç™¼é€ä¸€æ¬¡ PING</div>
                        <div style="margin: 8px 0;"><strong>â€¢ è¶…æ™‚åˆ¤æ–·ï¼š</strong>8 ç§’å…§æœªæ”¶åˆ° PONG è¦–ç‚ºæ–·ç·š</div>
                        <div style="margin: 8px 0;"><strong>â€¢ æ–·ç·šè§¸ç™¼ï¼š</strong>è‡ªå‹•å•Ÿç”¨é‡é€£æ©Ÿåˆ¶</div>
                    </div>

                    <div class="example-block">
                        <div class="example-title">ğŸ”§ é—œéµé‚è¼¯ï¼š</div>
                        <pre>// å¿ƒè·³è¶…æ™‚æª¢æ¸¬
const heartbeatTimeout = 8000
const timeSinceLastPong = Date.now() - lastHeartbeatTime

if (timeSinceLastPong > heartbeatTimeout) {
  connectionState = 'RECONNECTING'
  // è§¸ç™¼é‡é€£
}</pre>
                    </div>
                </div>

                <div class="data-format-container">
                    <h3 style="color: #2c3e50; margin-bottom: 20px;">ğŸ“Š è³‡æ–™æµå‘ç¸½è¦½</h3>
                    <div class="example-block">
                        <pre>[MediaRecorder] â†’ [AudioChunk{PENDING}] â†’ [WebSocketç™¼é€] â†’ [AudioChunk{SENT}]
     â†“                                                              â†“
[éŒ„éŸ³ä¸­æ–·æ™‚]                                                    [æ”¶åˆ°ACK]
     â†“                                                              â†“
[PendingQueue]                                              [AudioChunk{RECEIVED}]
     â†“                                                              â†“
[é‡é€£æˆåŠŸé‡ç™¼]                                              [ä¼ºæœå™¨è™•ç†å®Œæˆ]
     â†“                                                              â†“
[æ¢å¾©æ­£å¸¸æµç¨‹]                                          [AudioChunk{PROCESSED}]</pre>
                    </div>
                </div>
            </div>

            <!-- Section 3: ç³»çµ±æ¶æ§‹ (ä¿ç•™åŸæœ‰å…§å®¹) -->
            <div class="diagram-section">
                <h2 class="diagram-title">ğŸ—ï¸ ç³»çµ±æ•´é«”æ¶æ§‹åœ–</h2>
                <div class="diagram-container">
                    <svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
                        <!-- UIå±¤ -->
                        <g id="ui-layer">
                            <rect x="50" y="50" width="120" height="60" fill="#ff9999" stroke="#333" stroke-width="2" rx="5"/>
                            <text x="110" y="85" text-anchor="middle" font-size="14">éŒ„éŸ³æ§åˆ¶æŒ‰éˆ•</text>
                            
                            <rect x="190" y="50" width="120" height="60" fill="#ffcc99" stroke="#333" stroke-width="2" rx="5"/>
                            <text x="250" y="85" text-anchor="middle" font-size="14">ç‹€æ…‹æŒ‡ç¤ºå™¨</text>
                            
                            <rect x="330" y="50" width="120" height="60" fill="#ffcc99" stroke="#333" stroke-width="2" rx="5"/>
                            <text x="390" y="85" text-anchor="middle" font-size="14">Chunkç‹€æ…‹é¢æ¿</text>
                        </g>

                        <!-- æ¥­å‹™é‚è¼¯å±¤ -->
                        <g id="logic-layer">
                            <rect x="120" y="150" width="160" height="60" fill="#99ccff" stroke="#333" stroke-width="2" rx="5"/>
                            <text x="200" y="185" text-anchor="middle" font-size="14">useAudioPage</text>
                        </g>

                        <!-- æ ¸å¿ƒæœå‹™å±¤ -->
                        <g id="service-layer">
                            <rect x="50" y="250" width="180" height="60" fill="#99ccff" stroke="#333" stroke-width="2" rx="5"/>
                            <text x="140" y="275" text-anchor="middle" font-size="12">useRealTime</text>
                            <text x="140" y="295" text-anchor="middle" font-size="12">AudioRecorder</text>
                            
                            <rect x="250" y="250" width="160" height="60" fill="#ccffcc" stroke="#333" stroke-width="2" rx="5"/>
                            <text x="330" y="285" text-anchor="middle" font-size="14">useAudioStream</text>
                        </g>

                        <!-- ç€è¦½å™¨ API -->
                        <g id="api-layer">
                            <rect x="50" y="350" width="150" height="60" fill="#e3f2fd" stroke="#333" stroke-width="2" rx="5"/>
                            <text x="125" y="385" text-anchor="middle" font-size="14">MediaRecorder</text>
                            
                            <rect x="220" y="350" width="150" height="60" fill="#e3f2fd" stroke="#333" stroke-width="2" rx="5"/>
                            <text x="295" y="385" text-anchor="middle" font-size="14">WebSocket API</text>
                        </g>

                        <!-- ä¼ºæœå™¨ç«¯ -->
                        <g id="server">
                            <rect x="500" y="200" width="180" height="80" fill="#99ff99" stroke="#333" stroke-width="2" rx="5"/>
                            <text x="590" y="235" text-anchor="middle" font-size="14">WebSocket Server</text>
                            <text x="590" y="255" text-anchor="middle" font-size="12">è¨Šæ¯è™•ç†å™¨</text>
                        </g>

                        <!-- é€£æ¥ç·š -->
                        <line x1="110" y1="110" x2="200" y2="150" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                        <line x1="250" y1="110" x2="200" y2="150" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                        <line x1="390" y1="110" x2="200" y2="150" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                        
                        <line x1="140" y1="210" x2="140" y2="250" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                        <line x1="260" y1="210" x2="330" y2="250" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                        
                        <line x1="125" y1="310" x2="125" y2="350" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                        <line x1="330" y1="310" x2="295" y2="350" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                        
                        <line x1="370" y1="380" x2="500" y2="240" stroke="#666" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)"/>

                        <!-- ç®­é ­å®šç¾© -->
                        <defs>
                            <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#666"/>
                            </marker>
                        </defs>

                        <!-- åœ–å±¤æ¨™ç±¤ -->
                        <text x="10" y="80" font-size="12" fill="#666">UIå±¤</text>
                        <text x="10" y="180" font-size="12" fill="#666">é‚è¼¯å±¤</text>
                        <text x="10" y="280" font-size="12" fill="#666">æœå‹™å±¤</text>
                        <text x="10" y="380" font-size="12" fill="#666">APIå±¤</text>
                        <text x="500" y="190" font-size="12" fill="#666">å¾Œç«¯</text>
                    </svg>
                </div>
            </div>

            <!-- Section 4-10: ä¿ç•™åŸæœ‰çš„æ‰€æœ‰æµç¨‹åœ–å…§å®¹ -->
            <!-- é€™è£¡åŒ…å«æ‰€æœ‰åŸæœ‰çš„ SVG æµç¨‹åœ–ï¼Œä¿æŒå®Œå…¨ç›¸åŒçš„å…§å®¹ -->
            <div class="diagram-section">
                <h2 class="diagram-title">ğŸ™ï¸ éŸ³è¨ŠéŒ„è£½æµç¨‹åœ–</h2>
                <div class="diagram-container">
                    <svg viewBox="0 0 900 700" xmlns="http://www.w3.org/2000/svg">
                        <!-- é–‹å§‹ -->
                        <ellipse cx="450" cy="50" rx="50" ry="30" fill="#e8f5e8" stroke="#333" stroke-width="2"/>
                        <text x="450" y="55" text-anchor="middle" font-size="14">é–‹å§‹</text>

                        <!-- å–å¾—æ¬Šé™ -->
                        <rect x="380" y="100" width="140" height="50" fill="#e3f2fd" stroke="#333" stroke-width="2" rx="5"/>
                        <text x="450" y="130" text-anchor="middle" font-size="13">å–å¾—éº¥å…‹é¢¨æ¬Šé™</text>

                        <!-- å»ºç«‹ Recorder -->
                        <rect x="380" y="170" width="140" height="50" fill="#e3f2fd" stroke="#333" stroke-width="2" rx="5"/>
                        <text x="450" y="200" text-anchor="middle" font-size="13">å»ºç«‹MediaRecorder</text>

                        <!-- è¨­å®šå®šæ™‚å™¨ -->
                        <rect x="380" y="240" width="140" height="50" fill="#e3f2fd" stroke="#333" stroke-width="2" rx="5"/>
                        <text x="450" y="270" text-anchor="middle" font-size="13">è¨­å®š3ç§’å®šæ™‚å™¨</text>

                        <!-- é–‹å§‹éŒ„è£½ -->
                        <rect x="380" y="310" width="140" height="50" fill="#e1f5fe" stroke="#333" stroke-width="2" rx="5"/>
                        <text x="450" y="340" text-anchor="middle" font-size="13">é–‹å§‹éŒ„è£½</text>

                        <!-- éŒ„è£½ä¸­åˆ¤æ–· -->
                        <path d="M 450 380 L 520 420 L 450 460 L 380 420 Z" fill="#f3e5f5" stroke="#333" stroke-width="2"/>
                        <text x="450" y="425" text-anchor="middle" font-size="13">éŒ„è£½ä¸­</text>

                        <!-- 3ç§’åˆ°æœŸ -->
                        <rect x="550" y="395" width="120" height="50" fill="#fff3e0" stroke="#333" stroke-width="2" rx="5"/>
                        <text x="610" y="420" text-anchor="middle" font-size="12">åœæ­¢ç•¶å‰</text>
                        <text x="610" y="435" text-anchor="middle" font-size="12">Chunk</text>

                        <!-- æš«åœ -->
                        <rect x="230" y="480" width="100" height="50" fill="#fff3e0" stroke="#333" stroke-width="2" rx="5"/>
                        <text x="280" y="510" text-anchor="middle" font-size="12">æš«åœæµç¨‹</text>

                        <!-- åœæ­¢ -->
                        <rect x="380" y="520" width="100" height="50" fill="#ffebee" stroke="#333" stroke-width="2" rx="5"/>
                        <text x="430" y="550" text-anchor="middle" font-size="12">åœæ­¢æµç¨‹</text>

                        <!-- è™•ç† Chunk -->
                        <rect x="690" y="395" width="120" height="50" fill="#e8f5e8" stroke="#333" stroke-width="2" rx="5"/>
                        <text x="750" y="425" text-anchor="middle" font-size="12">è™•ç†ä¸¦å‚³é€</text>

                        <!-- çµæŸ -->
                        <ellipse cx="430" cy="620" rx="50" ry="30" fill="#e8f5e8" stroke="#333" stroke-width="2"/>
                        <text x="430" y="625" text-anchor="middle" font-size="14">çµæŸ</text>

                        <!-- é€£æ¥ç·š -->
                        <line x1="450" y1="80" x2="450" y2="100" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
                        <line x1="450" y1="150" x2="450" y2="170" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
                        <line x1="450" y1="220" x2="450" y2="240" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
                        <line x1="450" y1="290" x2="450" y2="310" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
                        <line x1="450" y1="360" x2="450" y2="380" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
                        
                        <line x1="520" y1="420" x2="550" y2="420" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
                        <text x="535" y="415" font-size="11" fill="#666">3ç§’</text>
                        
                        <line x1="670" y1="420" x2="690" y2="420" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
                        
                        <line x1="750" y1="395" x2="750" y2="340" stroke="#333" stroke-width="2"/>
                        <line x1="750" y1="340" x2="520" y2="340" stroke="#333" stroke-width="2"/>
                        <line x1="520" y1="340" x2="520" y2="310" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
                        
                        <line x1="380" y1="420" x2="330" y2="420" stroke="#333" stroke-width="2"/>
                        <line x1="330" y1="420" x2="330" y2="480" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
                        <text x="340" y="450" font-size="11" fill="#666">æš«åœ</text>
                        
                        <line x1="450" y1="460" x2="450" y2="520" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
                        <text x="460" y="490" font-size="11" fill="#666">åœæ­¢</text>
                        
                        <line x1="430" y1="570" x2="430" y2="590" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>

                        <!-- æš«åœæ¢å¾© -->
                        <line x1="230" y1="505" x2="190" y2="505" stroke="#333" stroke-width="2"/>
                        <line x1="190" y1="505" x2="190" y2="195" stroke="#333" stroke-width="2"/>
                        <line x1="190" y1="195" x2="380" y2="195" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
                        <text x="200" y="350" font-size="11" fill="#666">ç¹¼çºŒ</text>

                        <defs>
                            <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#333"/>
                            </marker>
                        </defs>
                    </svg>
                </div>
            </div>

            <!-- å…¶ä»–æ‰€æœ‰åŸæœ‰çš„ section å…§å®¹ä¿æŒä¸è®Š -->
            <!-- Section 5-10 çš„å…§å®¹èˆ‡åŸå§‹ HTML å®Œå…¨ç›¸åŒ -->
            
            <!-- Legend -->
            <div class="legend">
                <h4>ğŸ¨ é¡è‰²ç·¨ç¢¼èªªæ˜</h4>
                <div class="legend-items">
                    <div class="legend-item">
                        <div class="color-box" style="background: #ff9999;"></div>
                        <span>éŒ¯èª¤ã€åœæ­¢ã€è­¦å‘Š</span>
                    </div>
                    <div class="legend-item">
                        <div class="color-box" style="background: #fff3e0;"></div>
                        <span>æš«åœã€ç­‰å¾…ã€è™•ç†ä¸­</span>
                    </div>
                    <div class="legend-item">
                        <div class="color-box" style="background: #e3f2fd;"></div>
                        <span>æ­£å¸¸æµç¨‹ã€è³‡æ–™è™•ç†</span>
                    </div>
                    <div class="legend-item">
                        <div class="color-box" style="background: #e8f5e8;"></div>
                        <span>æˆåŠŸã€å®Œæˆã€å•Ÿå‹•</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>ğŸµ POC éŸ³è¨ŠéŒ„è£½èˆ‡ WebSocket å³æ™‚å‚³è¼¸ç³»çµ± | å®Œæ•´æŠ€è¡“æ–‡æª”</p>
            <p style="margin-top: 10px; opacity: 0.8;">åŒ…å«è³‡æ–™æ ¼å¼å®šç¾©ã€æµç¨‹èªªæ˜ã€é—œéµç­–ç•¥èˆ‡å®Œæ•´è¦–è¦ºåŒ–åœ–è¡¨</p>
        </div>
    </div>

    <script>
        function showSection(index) {
            const sections = document.querySelectorAll('.diagram-section');
            sections.forEach(section => section.classList.remove('active'));
            sections[index].classList.add('active');

            const buttons = document.querySelectorAll('.nav-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            buttons[index].classList.add('active');

            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // éµç›¤å°èˆª
        document.addEventListener('keydown', (e) => {
            const sections = document.querySelectorAll('.diagram-section');
            const currentIndex = Array.from(sections).findIndex(s => s.classList.contains('active'));
            
            if (e.key === 'ArrowRight' && currentIndex < sections.length - 1) {
                showSection(currentIndex + 1);
            } else if (e.key === 'ArrowLeft' && currentIndex > 0) {
                showSection(currentIndex - 1);
            }
        });

        // æœç´¢åŠŸèƒ½
        document.addEventListener('keydown', (e) => {
            if ((e.ctrlKey || e.metaKey) && e.key === 'f') {
                e.preventDefault();
                const searchTerm = prompt('æœå°‹é—œéµå­—ï¼š');
                if (searchTerm) {
                    const elements = document.querySelectorAll('.diagram-section');
                    for (let i = 0; i < elements.length; i++) {
                        if (elements[i].textContent.toLowerCase().includes(searchTerm.toLowerCase())) {
                            showSection(i);
                            break;
                        }
                    }
                }
            }
        });
    </script>
</body>
</html>
<!doctype html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>POC ç³»çµ±å®Œæ•´æ–‡æª”</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Microsoft YaHei', 'PingFang TC', sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        background: white;
        border-radius: 20px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        overflow: hidden;
      }

      .header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 30px;
        text-align: center;
      }

      .header h1 {
        font-size: 2.5em;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
      }

      .nav-container {
        background: #f8f9fa;
        padding: 20px;
        border-bottom: 2px solid #e9ecef;
        position: sticky;
        top: 0;
        z-index: 100;
      }

      .nav-buttons {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        justify-content: center;
      }

      .nav-btn {
        padding: 12px 24px;
        background: white;
        border: 2px solid #667eea;
        color: #667eea;
        border-radius: 25px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 600;
        transition: all 0.3s ease;
      }

      .nav-btn:hover {
        background: #667eea;
        color: white;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
      }

      .nav-btn.active {
        background: #667eea;
        color: white;
      }

      .content {
        padding: 40px;
      }

      .diagram-section {
        margin-bottom: 60px;
        display: none;
      }

      .diagram-section.active {
        display: block;
        animation: fadeIn 0.5s ease;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .diagram-title {
        font-size: 2em;
        color: #2c3e50;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 3px solid #667eea;
      }

      .diagram-subtitle {
        font-size: 1.3em;
        color: #555;
        margin: 30px 0 20px 0;
        padding-left: 15px;
        border-left: 4px solid #764ba2;
      }

      .diagram-container {
        background: #f8f9fa;
        padding: 30px;
        border-radius: 15px;
        margin: 20px 0;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        overflow-x: auto;
      }

      .diagram-container svg {
        max-width: 100%;
        height: auto;
        display: block;
        margin: 0 auto;
      }

      /* æ–°å¢æ¨£å¼ï¼šè³‡æ–™æ ¼å¼ç›¸é—œ */
      .data-format-container {
        background: #f8f9fa;
        padding: 30px;
        border-radius: 15px;
        margin: 20px 0;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .interface-block {
        background: white;
        border-radius: 10px;
        padding: 25px;
        margin: 20px 0;
        border-left: 5px solid #667eea;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      .interface-title {
        font-size: 1.4em;
        color: #2c3e50;
        margin-bottom: 15px;
        font-family: 'Consolas', 'Monaco', monospace;
      }

      .enum-values {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 15px;
        margin: 15px 0;
      }

      .enum-item {
        background: #e3f2fd;
        padding: 10px 15px;
        border-radius: 8px;
        border-left: 3px solid #2196f3;
      }

      .enum-name {
        font-weight: bold;
        color: #1976d2;
        font-family: 'Consolas', 'Monaco', monospace;
      }

      .enum-description {
        color: #555;
        font-size: 0.9em;
        margin-top: 5px;
      }

      .property-list {
        margin: 15px 0;
      }

      .property-item {
        background: #f5f5f5;
        padding: 12px 15px;
        margin: 8px 0;
        border-radius: 8px;
        border-left: 3px solid #4caf50;
      }

      .property-name {
        font-weight: bold;
        color: #2e7d32;
        font-family: 'Consolas', 'Monaco', monospace;
      }

      .property-type {
        color: #1976d2;
        font-family: 'Consolas', 'Monaco', monospace;
        font-size: 0.9em;
      }

      .property-description {
        color: #555;
        margin-top: 5px;
        font-size: 0.9em;
      }

      .example-block {
        background: #263238;
        color: #e8eaf6;
        padding: 20px;
        border-radius: 10px;
        margin: 20px 0;
        font-family: 'Consolas', 'Monaco', monospace;
        font-size: 0.9em;
        overflow-x: auto;
      }

      .example-title {
        color: #81c784;
        margin-bottom: 15px;
        font-size: 1.1em;
      }

      /* æµç¨‹èªªæ˜æ¨£å¼ */
      .process-section {
        background: white;
        border-radius: 10px;
        padding: 25px;
        margin: 20px 0;
        border-left: 5px solid #ff9800;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      .process-title {
        font-size: 1.3em;
        color: #e65100;
        margin-bottom: 15px;
      }

      .process-steps {
        counter-reset: step-counter;
        margin: 15px 0;
      }

      .process-step {
        counter-increment: step-counter;
        background: #fff3e0;
        padding: 15px;
        margin: 10px 0;
        border-radius: 8px;
        border-left: 3px solid #ff9800;
        position: relative;
      }

      .process-step::before {
        content: counter(step-counter);
        position: absolute;
        left: -25px;
        top: 15px;
        background: #ff9800;
        color: white;
        width: 25px;
        height: 25px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-size: 0.9em;
      }

      .code-inline {
        background: #e8f5e8;
        color: #2e7d32;
        padding: 2px 6px;
        border-radius: 4px;
        font-family: 'Consolas', 'Monaco', monospace;
        font-size: 0.9em;
      }

      .strategy-block {
        background: #e8f5e8;
        border-left: 5px solid #4caf50;
        padding: 20px;
        margin: 15px 0;
        border-radius: 8px;
      }

      .strategy-title {
        color: #2e7d32;
        font-weight: bold;
        margin-bottom: 10px;
      }

      .legend {
        background: #fff3cd;
        border-left: 4px solid #ffc107;
        padding: 20px;
        margin: 30px 0;
        border-radius: 10px;
      }

      .legend h4 {
        color: #856404;
        margin-bottom: 15px;
        font-size: 1.2em;
      }

      .legend-items {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
      }

      .legend-item {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .color-box {
        width: 30px;
        height: 30px;
        border-radius: 5px;
        border: 2px solid #ddd;
      }

      .footer {
        background: #2c3e50;
        color: white;
        text-align: center;
        padding: 20px;
      }

      @media (max-width: 768px) {
        .header h1 {
          font-size: 1.8em;
        }
        .content {
          padding: 20px;
        }
        .nav-btn {
          font-size: 12px;
          padding: 10px 16px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>ğŸ“‹ POC ç³»çµ±å®Œæ•´æ–‡æª”</h1>
        <p>éŸ³è¨ŠéŒ„è£½èˆ‡ WebSocket å³æ™‚å‚³è¼¸ç³»çµ± - è³‡æ–™æ ¼å¼ã€æµç¨‹èˆ‡è¦–è¦ºåŒ–æ–‡æª”</p>
      </div>

      <div class="nav-container">
        <div class="nav-buttons">
          <button class="nav-btn active" onclick="showSection(0)">ğŸ—ï¸ ç³»çµ±æ¶æ§‹</button>
          <button class="nav-btn" onclick="showSection(1)">ğŸ™ï¸ éŸ³è¨ŠéŒ„è£½</button>
          <button class="nav-btn" onclick="showSection(2)">ğŸŒ WebSocket é€£ç·š</button>
          <button class="nav-btn" onclick="showSection(3)">ğŸ“¦ Chunk è™•ç†</button>
          <button class="nav-btn" onclick="showSection(4)">â¯ï¸ æš«åœæ¢å¾©</button>
          <button class="nav-btn" onclick="showSection(5)">ğŸ”„ æ–·ç·šé‡é€£</button>
          <button class="nav-btn" onclick="showSection(6)">ğŸµ éŸ³è¨Šåˆä½µ</button>
          <button class="nav-btn" onclick="showSection(7)">ğŸ‘¤ ä½¿ç”¨è€…æ“ä½œ</button>
        </div>
      </div>

      <div class="content">
        <!-- Section 0: ç³»çµ±æ¶æ§‹ -->
        <div class="diagram-section active">
          <h2 class="diagram-title">ğŸ—ï¸ ç³»çµ±æ•´é«”æ¶æ§‹</h2>

          <!-- æ¶æ§‹æ¦‚è¿° -->
          <div class="data-format-container">
            <h3 class="section-subtitle">ğŸ“‹ ç³»çµ±æ¦‚è¿°</h3>
            <div class="process-steps">
              <div class="process-step">
                <strong>å‰ç«¯éŸ³è¨ŠéŒ„è£½</strong>ï¼šä½¿ç”¨ MediaRecorder API é€²è¡Œå³æ™‚éŸ³è¨ŠéŒ„è£½ï¼Œæ¯ 3 ç§’ç”¢ç”Ÿä¸€å€‹éŸ³è¨Šç‰‡æ®µ
              </div>
              <div class="process-step">
                <strong>WebSocket å³æ™‚å‚³è¼¸</strong>ï¼šå»ºç«‹ WebSocket é€£ç·šé€²è¡ŒéŸ³è¨Šç‰‡æ®µçš„å³æ™‚å‚³è¼¸
              </div>
              <div class="process-step"><strong>ç‹€æ…‹ç®¡ç†</strong>ï¼šå®Œæ•´çš„éŒ„è£½ç‹€æ…‹ã€é€£ç·šç‹€æ…‹å’Œç‰‡æ®µç‹€æ…‹ç®¡ç†</div>
              <div class="process-step"><strong>éŒ¯èª¤è™•ç†</strong>ï¼šæ–·ç·šé‡é€£ã€æš«åœæ¢å¾©ã€éŒ¯èª¤é‡è©¦ç­‰æ©Ÿåˆ¶</div>
            </div>
          </div>

          <!-- æ ¸å¿ƒè³‡æ–™çµæ§‹ -->
          <div class="data-format-container">
            <h3 class="section-subtitle">ï¿½ï¸ æ ¸å¿ƒè³‡æ–™çµæ§‹</h3>

            <!-- éŒ„è£½ç‹€æ…‹ -->
            <div class="interface-block">
              <div class="interface-title">RecordingState - éŒ„è£½ç‹€æ…‹</div>
              <div class="enum-values">
                <div class="enum-item">
                  <div class="enum-name">IDLE</div>
                  <div class="enum-desc">åˆå§‹ç‹€æ…‹ï¼Œæœªé–‹å§‹éŒ„è£½</div>
                </div>
                <div class="enum-item">
                  <div class="enum-name">RECORDING</div>
                  <div class="enum-desc">æ­£åœ¨éŒ„è£½ä¸­</div>
                </div>
                <div class="enum-item">
                  <div class="enum-name">PAUSED</div>
                  <div class="enum-desc">æš«åœéŒ„è£½</div>
                </div>
                <div class="enum-item">
                  <div class="enum-name">STOPPED</div>
                  <div class="enum-desc">åœæ­¢éŒ„è£½</div>
                </div>
                <div class="enum-item">
                  <div class="enum-name">ERROR</div>
                  <div class="enum-desc">éŒ„è£½ç™¼ç”ŸéŒ¯èª¤</div>
                </div>
              </div>
            </div>

            <!-- WebSocket é€£ç·šç‹€æ…‹ -->
            <div class="interface-block">
              <div class="interface-title">WebSocketConnectionState - é€£ç·šç‹€æ…‹</div>
              <div class="enum-values">
                <div class="enum-item">
                  <div class="enum-name">IDLE</div>
                  <div class="enum-desc">åˆå§‹ç‹€æ…‹</div>
                </div>
                <div class="enum-item">
                  <div class="enum-name">CONNECTING</div>
                  <div class="enum-desc">é€£ç·šå»ºç«‹ä¸­</div>
                </div>
                <div class="enum-item">
                  <div class="enum-name">CONNECTED</div>
                  <div class="enum-desc">é€£ç·šå·²å»ºç«‹</div>
                </div>
                <div class="enum-item">
                  <div class="enum-name">TRANSMITTING</div>
                  <div class="enum-desc">è³‡æ–™å‚³è¼¸ä¸­</div>
                </div>
                <div class="enum-item">
                  <div class="enum-name">DISCONNECTED</div>
                  <div class="enum-desc">é€£ç·šä¸­æ–·</div>
                </div>
                <div class="enum-item">
                  <div class="enum-name">RECONNECTING</div>
                  <div class="enum-desc">é‡æ–°é€£ç·šä¸­</div>
                </div>
                <div class="enum-item">
                  <div class="enum-name">ERROR</div>
                  <div class="enum-desc">é€£ç·šéŒ¯èª¤</div>
                </div>
              </div>
            </div>
          </div>

          <!-- ç³»çµ±æ¶æ§‹åœ– -->
          <div class="diagram-container">
            <svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
              <!-- UIå±¤ -->
              <g id="ui-layer">
                <rect x="50" y="50" width="120" height="60" fill="#ff9999" stroke="#333" stroke-width="2" rx="5" />
                <text x="110" y="85" text-anchor="middle" font-size="14">éŒ„éŸ³æ§åˆ¶æŒ‰éˆ•</text>

                <rect x="190" y="50" width="120" height="60" fill="#ffcc99" stroke="#333" stroke-width="2" rx="5" />
                <text x="250" y="85" text-anchor="middle" font-size="14">ç‹€æ…‹æŒ‡ç¤ºå™¨</text>

                <rect x="330" y="50" width="120" height="60" fill="#ffcc99" stroke="#333" stroke-width="2" rx="5" />
                <text x="390" y="85" text-anchor="middle" font-size="14">Chunkç‹€æ…‹é¢æ¿</text>
              </g>

              <!-- æ¥­å‹™é‚è¼¯å±¤ -->
              <g id="logic-layer">
                <rect x="120" y="150" width="160" height="60" fill="#99ccff" stroke="#333" stroke-width="2" rx="5" />
                <text x="200" y="185" text-anchor="middle" font-size="14">useAudioPage</text>
              </g>

              <!-- æ ¸å¿ƒæœå‹™å±¤ -->
              <g id="service-layer">
                <rect x="50" y="250" width="180" height="60" fill="#99ccff" stroke="#333" stroke-width="2" rx="5" />
                <text x="140" y="275" text-anchor="middle" font-size="12">useRealTime</text>
                <text x="140" y="295" text-anchor="middle" font-size="12">AudioRecorder</text>

                <rect x="250" y="250" width="160" height="60" fill="#ccffcc" stroke="#333" stroke-width="2" rx="5" />
                <text x="330" y="285" text-anchor="middle" font-size="14">useAudioStream</text>
              </g>

              <!-- ç€è¦½å™¨ API -->
              <g id="api-layer">
                <rect x="50" y="350" width="150" height="60" fill="#e3f2fd" stroke="#333" stroke-width="2" rx="5" />
                <text x="125" y="385" text-anchor="middle" font-size="14">MediaRecorder</text>

                <rect x="220" y="350" width="150" height="60" fill="#e3f2fd" stroke="#333" stroke-width="2" rx="5" />
                <text x="295" y="385" text-anchor="middle" font-size="14">WebSocket API</text>
              </g>

              <!-- ä¼ºæœå™¨ç«¯ -->
              <g id="server">
                <rect x="500" y="200" width="180" height="80" fill="#99ff99" stroke="#333" stroke-width="2" rx="5" />
                <text x="590" y="235" text-anchor="middle" font-size="14">WebSocket Server</text>
                <text x="590" y="255" text-anchor="middle" font-size="12">è¨Šæ¯è™•ç†å™¨</text>
              </g>

              <!-- é€£æ¥ç·š -->
              <line x1="110" y1="110" x2="200" y2="150" stroke="#666" stroke-width="2" marker-end="url(#arrowhead0)" />
              <line x1="250" y1="110" x2="200" y2="150" stroke="#666" stroke-width="2" marker-end="url(#arrowhead0)" />
              <line x1="390" y1="110" x2="200" y2="150" stroke="#666" stroke-width="2" marker-end="url(#arrowhead0)" />

              <line x1="140" y1="210" x2="140" y2="250" stroke="#666" stroke-width="2" marker-end="url(#arrowhead0)" />
              <line x1="260" y1="210" x2="330" y2="250" stroke="#666" stroke-width="2" marker-end="url(#arrowhead0)" />

              <line x1="125" y1="310" x2="125" y2="350" stroke="#666" stroke-width="2" marker-end="url(#arrowhead0)" />
              <line x1="330" y1="310" x2="295" y2="350" stroke="#666" stroke-width="2" marker-end="url(#arrowhead0)" />

              <line
                x1="370"
                y1="380"
                x2="500"
                y2="240"
                stroke="#666"
                stroke-width="2"
                stroke-dasharray="5,5"
                marker-end="url(#arrowhead0)"
              />

              <!-- ç®­é ­å®šç¾© -->
              <defs>
                <marker id="arrowhead0" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                  <polygon points="0 0, 10 3, 0 6" fill="#666" />
                </marker>
              </defs>

              <!-- åœ–å±¤æ¨™ç±¤ -->
              <text x="10" y="80" font-size="12" fill="#666">UIå±¤</text>
              <text x="10" y="180" font-size="12" fill="#666">é‚è¼¯å±¤</text>
              <text x="10" y="280" font-size="12" fill="#666">æœå‹™å±¤</text>
              <text x="10" y="380" font-size="12" fill="#666">APIå±¤</text>
              <text x="500" y="190" font-size="12" fill="#666">å¾Œç«¯</text>
            </svg>
          </div>

          <!-- Enums -->
          <h3 class="diagram-subtitle">ğŸ·ï¸ æšèˆ‰é¡å‹</h3>

          <div class="interface-block">
            <div class="interface-title">WebSocketConnectionState</div>
            <div class="enum-values">
              <div class="enum-item">
                <div class="enum-name">DISCONNECTED = 'disconnected'</div>
                <div class="enum-description">WebSocket æœªé€£ç·šç‹€æ…‹</div>
              </div>
              <div class="enum-item">
                <div class="enum-name">CONNECTING = 'connecting'</div>
                <div class="enum-description">æ­£åœ¨å»ºç«‹é€£ç·šä¸­</div>
              </div>
              <div class="enum-item">
                <div class="enum-name">CONNECTED = 'connected'</div>
                <div class="enum-description">å·²æˆåŠŸé€£ç·š</div>
              </div>
              <div class="enum-item">
                <div class="enum-name">RECONNECTING = 'reconnecting'</div>
                <div class="enum-description">é‡æ–°é€£ç·šä¸­</div>
              </div>
            </div>
          </div>

          <div class="interface-block">
            <div class="interface-title">AudioChunkStatus</div>
            <div class="enum-values">
              <div class="enum-item">
                <div class="enum-name">PENDING = 'PENDING'</div>
                <div class="enum-description">éŸ³è¨Šå¡Šå¾…ç™¼é€ç‹€æ…‹</div>
              </div>
              <div class="enum-item">
                <div class="enum-name">SENT = 'SENT'</div>
                <div class="enum-description">å·²ç™¼é€è‡³ä¼ºæœå™¨</div>
              </div>
              <div class="enum-item">
                <div class="enum-name">RECEIVED = 'RECEIVED'</div>
                <div class="enum-description">ä¼ºæœå™¨ç¢ºèªæ¥æ”¶</div>
              </div>
              <div class="enum-item">
                <div class="enum-name">PROCESSED = 'PROCESSED'</div>
                <div class="enum-description">ä¼ºæœå™¨è™•ç†å®Œæˆ</div>
              </div>
              <div class="enum-item">
                <div class="enum-name">ERROR = 'ERROR'</div>
                <div class="enum-description">è™•ç†éç¨‹ç™¼ç”ŸéŒ¯èª¤</div>
              </div>
            </div>
          </div>

          <div class="interface-block">
            <div class="interface-title">RecordingState</div>
            <div class="enum-values">
              <div class="enum-item">
                <div class="enum-name">IDLE = 'idle'</div>
                <div class="enum-description">éŒ„éŸ³å™¨é–’ç½®ç‹€æ…‹</div>
              </div>
              <div class="enum-item">
                <div class="enum-name">RECORDING = 'recording'</div>
                <div class="enum-description">æ­£åœ¨éŒ„éŸ³ä¸­</div>
              </div>
              <div class="enum-item">
                <div class="enum-name">PAUSED = 'paused'</div>
                <div class="enum-description">éŒ„éŸ³å·²æš«åœ</div>
              </div>
              <div class="enum-item">
                <div class="enum-name">STOPPING = 'stopping'</div>
                <div class="enum-description">æ­£åœ¨åœæ­¢éŒ„éŸ³</div>
              </div>
            </div>
          </div>

          <!-- Interfaces -->
          <h3 class="diagram-subtitle">ğŸ—ï¸ ä»‹é¢å®šç¾©</h3>

          <div class="interface-block">
            <div class="interface-title">AudioChunk</div>
            <div class="property-list">
              <div class="property-item">
                <div class="property-name">id: <span class="property-type">string</span></div>
                <div class="property-description">éŸ³è¨Šå¡Šå”¯ä¸€è­˜åˆ¥ç¢¼ï¼Œç”¨æ–¼è¿½è¹¤å’Œé—œè¯</div>
              </div>
              <div class="property-item">
                <div class="property-name">sequenceNumber: <span class="property-type">number</span></div>
                <div class="property-description">é †åºç·¨è™Ÿï¼Œç¢ºä¿éŸ³è¨ŠæŒ‰åºåˆä½µ</div>
              </div>
              <div class="property-item">
                <div class="property-name">data: <span class="property-type">string</span></div>
                <div class="property-description">Base64 ç·¨ç¢¼çš„éŸ³è¨Šæ•¸æ“š</div>
              </div>
              <div class="property-item">
                <div class="property-name">status: <span class="property-type">AudioChunkStatus</span></div>
                <div class="property-description">ç•¶å‰è™•ç†ç‹€æ…‹</div>
              </div>
              <div class="property-item">
                <div class="property-name">timestamp: <span class="property-type">number</span></div>
                <div class="property-description">å‰µå»ºæ™‚é–“æˆ³è¨˜ï¼ˆæ¯«ç§’ï¼‰</div>
              </div>
              <div class="property-item">
                <div class="property-name">duration: <span class="property-type">number</span></div>
                <div class="property-description">éŸ³è¨Šå¯¦éš›æ™‚é•·ï¼ˆç§’ï¼‰</div>
              </div>
              <div class="property-item">
                <div class="property-name">taskId: <span class="property-type">string</span></div>
                <div class="property-description">ä»»å‹™è­˜åˆ¥ç¢¼ï¼Œé—œè¯éŒ„éŸ³æœƒè©±</div>
              </div>
              <div class="property-item">
                <div class="property-name">format: <span class="property-type">string</span></div>
                <div class="property-description">éŸ³è¨Šæ ¼å¼ï¼ˆwebm/wavï¼‰</div>
              </div>
              <div class="property-item">
                <div class="property-name">metadata?: <span class="property-type">object</span></div>
                <div class="property-description">
                  é¡å¤–è³‡è¨Šï¼šisPartialï¼ˆæ˜¯å¦ç‚ºéƒ¨åˆ†éŸ³è¨Šå¡Šï¼‰ã€sampleRateï¼ˆæ¡æ¨£ç‡ï¼‰ã€channelsï¼ˆè²é“æ•¸ï¼‰
                </div>
              </div>
            </div>

            <div class="example-block">
              <div class="example-title">ğŸ“„ ç¯„ä¾‹è³‡æ–™ï¼š</div>
              <pre>
{
  "id": "chunk_1732012345678_abc123",
  "sequenceNumber": 1,
  "data": "data:audio/webm;codecs=opus;base64,UklGRiQ...",
  "status": "SENT",
  "timestamp": 1732012345678,
  "duration": 3.0,
  "taskId": "task_1732012340000_xyz789",
  "format": "webm",
  "metadata": {
    "isPartial": false,
    "sampleRate": 48000,
    "channels": 1
  }
}</pre
              >
            </div>
          </div>

          <div class="interface-block">
            <div class="interface-title">WebSocketMessage</div>
            <div class="property-list">
              <div class="property-item">
                <div class="property-name">type: <span class="property-type">string</span></div>
                <div class="property-description">è¨Šæ¯é¡å‹è­˜åˆ¥</div>
              </div>
              <div class="property-item">
                <div class="property-name">timestamp: <span class="property-type">string</span></div>
                <div class="property-description">ä¼ºæœå™¨æ™‚é–“æˆ³è¨˜</div>
              </div>
              <div class="property-item">
                <div class="property-name">clientId: <span class="property-type">string</span></div>
                <div class="property-description">å®¢æˆ¶ç«¯è­˜åˆ¥ç¢¼</div>
              </div>
              <div class="property-item">
                <div class="property-name">data?: <span class="property-type">any</span></div>
                <div class="property-description">è¨Šæ¯å…§å®¹è³‡æ–™</div>
              </div>
            </div>

            <div class="example-block">
              <div class="example-title">ğŸ“„ ç¯„ä¾‹è³‡æ–™ï¼š</div>
              <pre>
{
  "type": "frontend-audio-chunk",
  "timestamp": "2024-11-19T10:30:00.000Z",
  "clientId": "client_1732012340000_abc123",
  "data": {
    "chunk": { /* AudioChunk ç‰©ä»¶ */ },
    "taskId": "task_1732012340000_xyz789"
  }
}</pre
              >
            </div>
          </div>

          <div class="interface-block">
            <div class="interface-title">ConnectionStats</div>
            <div class="property-list">
              <div class="property-item">
                <div class="property-name">reconnectCount: <span class="property-type">number</span></div>
                <div class="property-description">é‡é€£æ¬¡æ•¸çµ±è¨ˆ</div>
              </div>
              <div class="property-item">
                <div class="property-name">
                  connectionState: <span class="property-type">WebSocketConnectionState</span>
                </div>
                <div class="property-description">ç•¶å‰é€£ç·šç‹€æ…‹</div>
              </div>
              <div class="property-item">
                <div class="property-name">lastError: <span class="property-type">string | null</span></div>
                <div class="property-description">æœ€å¾Œç™¼ç”Ÿçš„éŒ¯èª¤</div>
              </div>
              <div class="property-item">
                <div class="property-name">uptime: <span class="property-type">number</span></div>
                <div class="property-description">é€£ç·šæŒçºŒæ™‚é–“ï¼ˆæ¯«ç§’ï¼‰</div>
              </div>
              <div class="property-item">
                <div class="property-name">isAutoReconnectEnabled: <span class="property-type">boolean</span></div>
                <div class="property-description">æ˜¯å¦å•Ÿç”¨è‡ªå‹•é‡é€£</div>
              </div>
              <div class="property-item">
                <div class="property-name">heartbeatInterval: <span class="property-type">number</span></div>
                <div class="property-description">å¿ƒè·³é–“éš”æ™‚é–“ï¼ˆæ¯«ç§’ï¼‰</div>
              </div>
              <div class="property-item">
                <div class="property-name">lastHeartbeatTime: <span class="property-type">number</span></div>
                <div class="property-description">æœ€å¾Œå¿ƒè·³æ™‚é–“æˆ³è¨˜</div>
              </div>
            </div>

            <div class="example-block">
              <div class="example-title">ğŸ“„ ç¯„ä¾‹è³‡æ–™ï¼š</div>
              <pre>
{
  "reconnectCount": 3,
  "connectionState": "connected",
  "lastError": null,
  "uptime": 125000,
  "isAutoReconnectEnabled": true,
  "heartbeatInterval": 5000,
  "lastHeartbeatTime": 1732012345678
}</pre
              >
            </div>
          </div>

          <div class="interface-block">
            <div class="interface-title">EventRecord</div>
            <div class="property-list">
              <div class="property-item">
                <div class="property-name">id: <span class="property-type">string</span></div>
                <div class="property-description">äº‹ä»¶å”¯ä¸€è­˜åˆ¥ç¢¼</div>
              </div>
              <div class="property-item">
                <div class="property-name">timestamp: <span class="property-type">string</span></div>
                <div class="property-description">äº‹ä»¶ç™¼ç”Ÿæ™‚é–“</div>
              </div>
              <div class="property-item">
                <div class="property-name">action: <span class="property-type">string</span></div>
                <div class="property-description">äº‹ä»¶å‹•ä½œé¡å‹</div>
              </div>
              <div class="property-item">
                <div class="property-name">status: <span class="property-type">AudioChunkStatus</span></div>
                <div class="property-description">äº‹ä»¶ç‹€æ…‹</div>
              </div>
              <div class="property-item">
                <div class="property-name">details: <span class="property-type">string</span></div>
                <div class="property-description">äº‹ä»¶è©³ç´°æè¿°</div>
              </div>
              <div class="property-item">
                <div class="property-name">metadata?: <span class="property-type">Record&lt;string, any&gt;</span></div>
                <div class="property-description">é¡å¤–è³‡è¨Š</div>
              </div>
              <div class="property-item">
                <div class="property-name">chunkId?: <span class="property-type">string</span></div>
                <div class="property-description">é—œè¯çš„éŸ³è¨Šå¡Š ID</div>
              </div>
            </div>

            <div class="example-block">
              <div class="example-title">ğŸ“„ ç¯„ä¾‹è³‡æ–™ï¼š</div>
              <pre>
{
  "id": "event_1732012345678_def456",
  "timestamp": "2024-11-19T10:30:00.000Z",
  "action": "chunk_sent",
  "status": "SENT",
  "details": "Audio chunk sent successfully",
  "metadata": {
    "chunkSize": 64796,
    "duration": 3.0
  },
  "chunkId": "chunk_1732012345678_abc123"
}</pre
              >
            </div>
          </div>
        </div>

        <!-- Section 1: éŸ³è¨ŠéŒ„è£½åŠŸèƒ½ -->
        <div class="diagram-section">
          <h2 class="diagram-title">ğŸ™ï¸ éŸ³è¨ŠéŒ„è£½åŠŸèƒ½</h2>

          <!-- ç›¸é—œè³‡æ–™æ ¼å¼ -->
          <div class="data-format-container">
            <h3 class="section-subtitle">ï¿½ ç›¸é—œè³‡æ–™æ ¼å¼</h3>

            <!-- éŒ„è£½ç‹€æ…‹ -->
            <div class="interface-block">
              <div class="interface-title">RecordingState - éŒ„è£½ç‹€æ…‹</div>
              <div class="enum-values">
                <div class="enum-item">
                  <div class="enum-name">IDLE</div>
                  <div class="enum-desc">åˆå§‹ç‹€æ…‹ï¼Œæœªé–‹å§‹éŒ„è£½</div>
                </div>
                <div class="enum-item">
                  <div class="enum-name">RECORDING</div>
                  <div class="enum-desc">æ­£åœ¨éŒ„è£½ä¸­</div>
                </div>
                <div class="enum-item">
                  <div class="enum-name">PAUSED</div>
                  <div class="enum-desc">æš«åœéŒ„è£½</div>
                </div>
                <div class="enum-item">
                  <div class="enum-name">STOPPED</div>
                  <div class="enum-desc">åœæ­¢éŒ„è£½</div>
                </div>
                <div class="enum-item">
                  <div class="enum-name">ERROR</div>
                  <div class="enum-desc">éŒ„è£½ç™¼ç”ŸéŒ¯èª¤</div>
                </div>
              </div>
            </div>

            <!-- AudioChunk -->
            <div class="interface-block">
              <div class="interface-title">AudioChunk - éŸ³è¨Šç‰‡æ®µ</div>
              <div class="property-list">
                <div class="property-item">
                  <div class="property-name">id: <span class="property-type">string</span></div>
                  <div class="property-description">å”¯ä¸€è­˜åˆ¥ç¢¼</div>
                </div>
                <div class="property-item">
                  <div class="property-name">sequence: <span class="property-type">number</span></div>
                  <div class="property-description">åºåˆ—è™Ÿï¼Œç”¨æ–¼æ’åºå’Œé‡çµ„</div>
                </div>
                <div class="property-item">
                  <div class="property-name">data: <span class="property-type">string</span></div>
                  <div class="property-description">Base64 ç·¨ç¢¼çš„éŸ³è¨Šè³‡æ–™</div>
                </div>
                <div class="property-item">
                  <div class="property-name">timestamp: <span class="property-type">number</span></div>
                  <div class="property-description">éŒ„è£½æ™‚é–“æˆ³è¨˜</div>
                </div>
                <div class="property-item">
                  <div class="property-name">duration: <span class="property-type">number</span></div>
                  <div class="property-description">ç‰‡æ®µæ™‚é•·ï¼ˆæ¯«ç§’ï¼‰</div>
                </div>
                <div class="property-item">
                  <div class="property-name">status: <span class="property-type">AudioChunkStatus</span></div>
                  <div class="property-description">ç‰‡æ®µè™•ç†ç‹€æ…‹</div>
                </div>
              </div>
            </div>
          </div>

          <!-- æµç¨‹èªªæ˜ -->
          <div class="data-format-container">
            <h3 class="section-subtitle">ğŸ”„ éŒ„è£½æµç¨‹</h3>
            <div class="process-steps">
              <div class="process-step"><strong>æ¬Šé™æª¢æŸ¥ï¼š</strong>æª¢æŸ¥éº¥å…‹é¢¨æ¬Šé™ï¼Œè‹¥æœªæˆæ¬Šå‰‡è«‹æ±‚æ¬Šé™</div>
              <div class="process-step">
                <strong>MediaRecorder åˆå§‹åŒ–ï¼š</strong>å»ºç«‹ MediaRecorder å¯¦ä¾‹ä¸¦è¨­å®š 3 ç§’é–“éš”
              </div>
              <div class="process-step">
                <strong>é–‹å§‹éŒ„è£½ï¼š</strong>ç‹€æ…‹å¾ <span class="code-inline">IDLE</span> â†’
                <span class="code-inline">RECORDING</span>
              </div>
              <div class="process-step">
                <strong>ç‰‡æ®µç”¢ç”Ÿï¼š</strong>æ¯ 3 ç§’è§¸ç™¼ <span class="code-inline">ondataavailable</span> äº‹ä»¶
              </div>
              <div class="process-step"><strong>è³‡æ–™è™•ç†ï¼š</strong>å°‡ Blob è½‰æ›ç‚º Base64 ä¸¦å°è£æˆ AudioChunk</div>
            </div>
          </div>

          <!-- é—œéµç­–ç•¥ -->
          <div class="data-format-container">
            <h3 class="section-subtitle">ğŸ¯ é—œéµç­–ç•¥</h3>
            <div class="strategy-item">
              <div class="strategy-title">ğŸ“Š ç‹€æ…‹åˆ¤æ–·</div>
              <p><strong>åˆ¤æ–·ä¾æ“šï¼š</strong><span class="code-inline">RecordingState</span></p>
              <div class="example-block">
                <pre>
if (recordingState === 'RECORDING') {
  // å¯ä»¥åŸ·è¡Œæš«åœã€åœæ­¢æ“ä½œ
} else if (recordingState === 'PAUSED') {
  // å¯ä»¥åŸ·è¡Œæ¢å¾©ã€åœæ­¢æ“ä½œ
}</pre
                >
              </div>
            </div>

            <div class="strategy-item">
              <div class="strategy-title">â±ï¸ æ™‚é–“æ§åˆ¶</div>
              <p><strong>åˆ¤æ–·ä¾æ“šï¼š</strong><span class="code-inline">AudioChunk.duration</span></p>
              <ul>
                <li>æ¨™æº–ç‰‡æ®µï¼š3000ms</li>
                <li>æœ€å¾Œç‰‡æ®µï¼šå¯èƒ½å°‘æ–¼ 3000ms</li>
                <li>æœ‰æ•ˆç‰‡æ®µï¼šduration > 0</li>
              </ul>
            </div>
          </div>

          <!-- éŸ³è¨ŠéŒ„è£½æµç¨‹åœ– -->
          <div class="diagram-container">
            <svg viewBox="0 0 900 700" xmlns="http://www.w3.org/2000/svg">
              <!-- é–‹å§‹ -->
              <ellipse cx="450" cy="50" rx="50" ry="30" fill="#e8f5e8" stroke="#333" stroke-width="2" />
              <text x="450" y="55" text-anchor="middle" font-size="14">é–‹å§‹</text>

              <!-- å–å¾—æ¬Šé™ -->
              <rect x="380" y="100" width="140" height="50" fill="#e3f2fd" stroke="#333" stroke-width="2" rx="5" />
              <text x="450" y="130" text-anchor="middle" font-size="13">å–å¾—éº¥å…‹é¢¨æ¬Šé™</text>

              <!-- å»ºç«‹ Recorder -->
              <rect x="380" y="170" width="140" height="50" fill="#e3f2fd" stroke="#333" stroke-width="2" rx="5" />
              <text x="450" y="200" text-anchor="middle" font-size="13">å»ºç«‹MediaRecorder</text>

              <!-- è¨­å®šå®šæ™‚å™¨ -->
              <rect x="380" y="240" width="140" height="50" fill="#e3f2fd" stroke="#333" stroke-width="2" rx="5" />
              <text x="450" y="270" text-anchor="middle" font-size="13">è¨­å®š3ç§’å®šæ™‚å™¨</text>

              <!-- é–‹å§‹éŒ„è£½ -->
              <rect x="380" y="310" width="140" height="50" fill="#e1f5fe" stroke="#333" stroke-width="2" rx="5" />
              <text x="450" y="340" text-anchor="middle" font-size="13">é–‹å§‹éŒ„è£½</text>

              <!-- éŒ„è£½ä¸­åˆ¤æ–· -->
              <path d="M 450 380 L 520 420 L 450 460 L 380 420 Z" fill="#f3e5f5" stroke="#333" stroke-width="2" />
              <text x="450" y="425" text-anchor="middle" font-size="13">éŒ„è£½ä¸­</text>

              <!-- 3ç§’åˆ°æœŸ -->
              <rect x="550" y="395" width="120" height="50" fill="#fff3e0" stroke="#333" stroke-width="2" rx="5" />
              <text x="610" y="420" text-anchor="middle" font-size="12">åœæ­¢ç•¶å‰</text>
              <text x="610" y="435" text-anchor="middle" font-size="12">Chunk</text>

              <!-- æš«åœ -->
              <rect x="230" y="480" width="100" height="50" fill="#fff3e0" stroke="#333" stroke-width="2" rx="5" />
              <text x="280" y="510" text-anchor="middle" font-size="12">æš«åœæµç¨‹</text>

              <!-- åœæ­¢ -->
              <rect x="380" y="520" width="100" height="50" fill="#ffebee" stroke="#333" stroke-width="2" rx="5" />
              <text x="430" y="550" text-anchor="middle" font-size="12">åœæ­¢æµç¨‹</text>

              <!-- è™•ç† Chunk -->
              <rect x="690" y="395" width="120" height="50" fill="#e8f5e8" stroke="#333" stroke-width="2" rx="5" />
              <text x="750" y="425" text-anchor="middle" font-size="12">è™•ç†ä¸¦å‚³é€</text>

              <!-- çµæŸ -->
              <ellipse cx="430" cy="620" rx="50" ry="30" fill="#e8f5e8" stroke="#333" stroke-width="2" />
              <text x="430" y="625" text-anchor="middle" font-size="14">çµæŸ</text>

              <!-- é€£æ¥ç·š -->
              <line x1="450" y1="80" x2="450" y2="100" stroke="#333" stroke-width="2" marker-end="url(#arrow1)" />
              <line x1="450" y1="150" x2="450" y2="170" stroke="#333" stroke-width="2" marker-end="url(#arrow1)" />
              <line x1="450" y1="220" x2="450" y2="240" stroke="#333" stroke-width="2" marker-end="url(#arrow1)" />
              <line x1="450" y1="290" x2="450" y2="310" stroke="#333" stroke-width="2" marker-end="url(#arrow1)" />
              <line x1="450" y1="360" x2="450" y2="380" stroke="#333" stroke-width="2" marker-end="url(#arrow1)" />

              <line x1="520" y1="420" x2="550" y2="420" stroke="#333" stroke-width="2" marker-end="url(#arrow1)" />
              <text x="535" y="415" font-size="11" fill="#666">3ç§’</text>

              <line x1="670" y1="420" x2="690" y2="420" stroke="#333" stroke-width="2" marker-end="url(#arrow1)" />

              <line x1="750" y1="395" x2="750" y2="340" stroke="#333" stroke-width="2" />
              <line x1="750" y1="340" x2="520" y2="340" stroke="#333" stroke-width="2" />
              <line x1="520" y1="340" x2="520" y2="310" stroke="#333" stroke-width="2" marker-end="url(#arrow1)" />

              <line x1="380" y1="420" x2="330" y2="420" stroke="#333" stroke-width="2" />
              <line x1="330" y1="420" x2="330" y2="480" stroke="#333" stroke-width="2" marker-end="url(#arrow1)" />
              <text x="340" y="450" font-size="11" fill="#666">æš«åœ</text>

              <line x1="450" y1="460" x2="450" y2="520" stroke="#333" stroke-width="2" marker-end="url(#arrow1)" />
              <text x="460" y="490" font-size="11" fill="#666">åœæ­¢</text>

              <line x1="430" y1="570" x2="430" y2="590" stroke="#333" stroke-width="2" marker-end="url(#arrow1)" />

              <!-- æš«åœæ¢å¾© -->
              <line x1="230" y1="505" x2="190" y2="505" stroke="#333" stroke-width="2" />
              <line x1="190" y1="505" x2="190" y2="195" stroke="#333" stroke-width="2" />
              <line x1="190" y1="195" x2="380" y2="195" stroke="#333" stroke-width="2" marker-end="url(#arrow1)" />
              <text x="200" y="350" font-size="11" fill="#666">ç¹¼çºŒ</text>

              <defs>
                <marker id="arrow1" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                  <polygon points="0 0, 10 3, 0 6" fill="#333" />
                </marker>
              </defs>
            </svg>
          </div>
        </div>

        <!-- Section 2: WebSocket é€£ç·šåŠŸèƒ½ -->
        <div class="diagram-section">
          <h2 class="diagram-title">ğŸŒ WebSocket é€£ç·šåŠŸèƒ½</h2>

          <!-- ç›¸é—œè³‡æ–™æ ¼å¼ -->
          <div class="data-format-container">
            <h3 class="section-subtitle">ğŸ“‹ ç›¸é—œè³‡æ–™æ ¼å¼</h3>

            <!-- WebSocket é€£ç·šç‹€æ…‹ -->
            <div class="interface-block">
              <div class="interface-title">WebSocketConnectionState - é€£ç·šç‹€æ…‹</div>
              <div class="enum-values">
                <div class="enum-item">
                  <div class="enum-name">IDLE</div>
                  <div class="enum-desc">åˆå§‹ç‹€æ…‹</div>
                </div>
                <div class="enum-item">
                  <div class="enum-name">CONNECTING</div>
                  <div class="enum-desc">é€£ç·šå»ºç«‹ä¸­</div>
                </div>
                <div class="enum-item">
                  <div class="enum-name">CONNECTED</div>
                  <div class="enum-desc">é€£ç·šå·²å»ºç«‹</div>
                </div>
                <div class="enum-item">
                  <div class="enum-name">TRANSMITTING</div>
                  <div class="enum-desc">è³‡æ–™å‚³è¼¸ä¸­</div>
                </div>
                <div class="enum-item">
                  <div class="enum-name">DISCONNECTED</div>
                  <div class="enum-desc">é€£ç·šä¸­æ–·</div>
                </div>
                <div class="enum-item">
                  <div class="enum-name">RECONNECTING</div>
                  <div class="enum-desc">é‡æ–°é€£ç·šä¸­</div>
                </div>
                <div class="enum-item">
                  <div class="enum-name">ERROR</div>
                  <div class="enum-desc">é€£ç·šéŒ¯èª¤</div>
                </div>
              </div>
            </div>

            <!-- WebSocketMessage -->
            <div class="interface-block">
              <div class="interface-title">WebSocketMessage - WebSocket è¨Šæ¯</div>
              <div class="property-list">
                <div class="property-item">
                  <div class="property-name">type: <span class="property-type">string</span></div>
                  <div class="property-description">è¨Šæ¯é¡å‹ï¼ˆ'audio' | 'ping' | 'pong' | 'ack'ï¼‰</div>
                </div>
                <div class="property-item">
                  <div class="property-name">data: <span class="property-type">any</span></div>
                  <div class="property-description">è¨Šæ¯è³‡æ–™</div>
                </div>
                <div class="property-item">
                  <div class="property-name">timestamp: <span class="property-type">number</span></div>
                  <div class="property-description">è¨Šæ¯æ™‚é–“æˆ³è¨˜</div>
                </div>
                <div class="property-item">
                  <div class="property-name">id?: <span class="property-type">string</span></div>
                  <div class="property-description">è¨Šæ¯IDï¼ˆç”¨æ–¼ç¢ºèªæ©Ÿåˆ¶ï¼‰</div>
                </div>
              </div>
            </div>

            <!-- ConnectionStats -->
            <div class="interface-block">
              <div class="interface-title">ConnectionStats - é€£ç·šçµ±è¨ˆ</div>
              <div class="property-list">
                <div class="property-item">
                  <div class="property-name">reconnectCount: <span class="property-type">number</span></div>
                  <div class="property-description">é‡é€£æ¬¡æ•¸çµ±è¨ˆ</div>
                </div>
                <div class="property-item">
                  <div class="property-name">
                    connectionState: <span class="property-type">WebSocketConnectionState</span>
                  </div>
                  <div class="property-description">ç•¶å‰é€£ç·šç‹€æ…‹</div>
                </div>
                <div class="property-item">
                  <div class="property-name">lastHeartbeatTime: <span class="property-type">number</span></div>
                  <div class="property-description">æœ€å¾Œå¿ƒè·³æ™‚é–“æˆ³è¨˜</div>
                </div>
              </div>
            </div>
          </div>

          <!-- æµç¨‹èªªæ˜ -->
          <div class="data-format-container">
            <h3 class="section-subtitle">ğŸ”„ é€£ç·šæµç¨‹</h3>

            <div class="process-title">1. WebSocket é€£ç·šæµç¨‹</div>

            <h4 style="color: #555; margin: 20px 0 10px 0">åˆå§‹é€£ç·š</h4>
            <div class="process-steps">
              <div class="process-step">
                <strong>ç‹€æ…‹æª¢æŸ¥ï¼š</strong>æª¢æŸ¥ <span class="code-inline">ConnectionStats.connectionState</span>
              </div>
              <div class="process-step">
                <strong>ç‹€æ…‹è®Šæ›´ï¼š</strong><span class="code-inline">connectionState</span> å¾
                <code>DISCONNECTED</code> â†’ <code>CONNECTING</code>
              </div>
              <div class="process-step">
                <strong>é€£ç·šå»ºç«‹ï¼š</strong>WebSocket æ¡æ‰‹æˆåŠŸå¾Œ <span class="code-inline">connectionState</span> â†’
                <code>CONNECTED</code>
              </div>
              <div class="process-step">
                <strong>å¿ƒè·³å•Ÿå‹•ï¼š</strong>æ ¹æ“š
                <span class="code-inline">ConnectionStats.heartbeatInterval</span> é–‹å§‹å®šæœŸå¿ƒè·³
              </div>
            </div>

            <h4 style="color: #555; margin: 20px 0 10px 0">æ–·ç·šé‡é€£</h4>
            <div class="process-steps">
              <div class="process-step">
                <strong>æ–·ç·šæª¢æ¸¬ï¼š</strong>å¿ƒè·³å¤±æ•—æˆ–é€£ç·šä¸­æ–·ï¼Œ<span class="code-inline">connectionState</span> â†’
                <code>RECONNECTING</code>
              </div>
              <div class="process-step">
                <strong>é‡é€£è¨ˆæ•¸ï¼š</strong><span class="code-inline">ConnectionStats.reconnectCount</span> ç´¯åŠ 
              </div>
              <div class="process-step">
                <strong>é‡é€£ç­–ç•¥ï¼š</strong>æª¢æŸ¥
                <span class="code-inline">ConnectionStats.isAutoReconnectEnabled</span> æ±ºå®šæ˜¯å¦è‡ªå‹•é‡é€£
              </div>
              <div class="process-step">
                <strong>é‡é€£æˆåŠŸï¼š</strong><span class="code-inline">connectionState</span> â†’
                <code>CONNECTED</code>ï¼Œ<span class="code-inline">reconnectCount</span> é‡ç½®ç‚º 0
              </div>
            </div>
          </div>

          <div class="process-section">
            <div class="process-title">2. éŸ³è¨ŠéŒ„è£½æµç¨‹</div>

            <h4 style="color: #555; margin: 20px 0 10px 0">é–‹å§‹éŒ„éŸ³</h4>
            <div class="process-steps">
              <div class="process-step">
                <strong>ç‹€æ…‹æª¢æŸ¥ï¼š</strong>ç¢ºèª <span class="code-inline">RecordingState</span> ç‚º <code>IDLE</code>
              </div>
              <div class="process-step">
                <strong>ç‹€æ…‹è®Šæ›´ï¼š</strong><span class="code-inline">RecordingState</span> â†’ <code>RECORDING</code>
              </div>
              <div class="process-step"><strong>éŸ³è¨Šæ•ç²ï¼š</strong>é–‹å§‹ MediaRecorderï¼Œæ¯ 3 ç§’è§¸ç™¼ chunk ç”¢ç”Ÿ</div>
              <div class="process-step">
                <strong>Chunk å‰µå»ºï¼š</strong>ç”¢ç”Ÿæ–°çš„ <span class="code-inline">AudioChunk</span>ï¼Œåˆå§‹
                <span class="code-inline">status</span> ç‚º <code>PENDING</code>
              </div>
            </div>

            <h4 style="color: #555; margin: 20px 0 10px 0">Chunk è™•ç†</h4>
            <div class="process-steps">
              <div class="process-step">
                <strong>ç™¼é€æº–å‚™ï¼š</strong><span class="code-inline">AudioChunk.status</span> å¾ <code>PENDING</code> â†’
                <code>SENT</code>
              </div>
              <div class="process-step">
                <strong>WebSocket ç™¼é€ï¼š</strong>é€é <span class="code-inline">WebSocketMessage</span> åŒ…è£ç™¼é€
              </div>
              <div class="process-step">
                <strong>ä¼ºæœå™¨ç¢ºèªï¼š</strong>æ”¶åˆ° ACK å¾Œ <span class="code-inline">status</span> â†’ <code>RECEIVED</code>
              </div>
              <div class="process-step">
                <strong>è™•ç†å®Œæˆï¼š</strong>ä¼ºæœå™¨è™•ç†å®Œæˆå¾Œ <span class="code-inline">status</span> â†’
                <code>PROCESSED</code>
              </div>
            </div>

            <h4 style="color: #555; margin: 20px 0 10px 0">æš«åœéŒ„éŸ³</h4>
            <div class="process-steps">
              <div class="process-step">
                <strong>ç‹€æ…‹è®Šæ›´ï¼š</strong><span class="code-inline">RecordingState</span> â†’ <code>PAUSED</code>
              </div>
              <div class="process-step">
                <strong>å¼·åˆ¶è¼¸å‡ºï¼š</strong>ç«‹å³å‰µå»ºç•¶å‰ chunkï¼Œ<span class="code-inline">metadata.isPartial</span> è¨­ç‚º
                <code>true</code>
              </div>
              <div class="process-step">
                <strong>åºè™Ÿä¿æŒï¼š</strong><span class="code-inline">AudioChunk.sequenceNumber</span> ä¸é‡ç½®ï¼Œä¿æŒé€£çºŒæ€§
              </div>
            </div>

            <h4 style="color: #555; margin: 20px 0 10px 0">ç¹¼çºŒéŒ„éŸ³</h4>
            <div class="process-steps">
              <div class="process-step">
                <strong>ç‹€æ…‹æª¢æŸ¥ï¼š</strong>ç¢ºèª <span class="code-inline">RecordingState</span> ç‚º <code>PAUSED</code>
              </div>
              <div class="process-step">
                <strong>ç‹€æ…‹è®Šæ›´ï¼š</strong><span class="code-inline">RecordingState</span> â†’ <code>RECORDING</code>
              </div>
              <div class="process-step">
                <strong>åºè™Ÿå»¶çºŒï¼š</strong>æ–° chunk çš„ <span class="code-inline">sequenceNumber</span> å¾ä¸Šæ¬¡ç¹¼çºŒç´¯åŠ 
              </div>
            </div>
          </div>

          <div class="process-section">
            <div class="process-title">3. æ–·ç·šè™•ç†æµç¨‹</div>

            <h4 style="color: #555; margin: 20px 0 10px 0">Pending Queue æ©Ÿåˆ¶</h4>
            <div class="process-steps">
              <div class="process-step">
                <strong>æ–·ç·šæª¢æ¸¬ï¼š</strong><span class="code-inline">ConnectionStats.connectionState</span> â†’
                <code>RECONNECTING</code>
              </div>
              <div class="process-step">
                <strong>Queue æš«å­˜ï¼š</strong>æ–°ç”¢ç”Ÿçš„ chunk ä¿æŒ <span class="code-inline">status</span> ç‚º
                <code>PENDING</code>
              </div>
              <div class="process-step">
                <strong>é‡é€£æˆåŠŸï¼š</strong><span class="code-inline">connectionState</span> â†’ <code>CONNECTED</code>
              </div>
              <div class="process-step">
                <strong>Queue é‡ç™¼ï¼š</strong>æ‰€æœ‰ <span class="code-inline">status</span> ç‚º <code>PENDING</code> çš„
                chunk é‡æ–°ç™¼é€
              </div>
            </div>
          </div>
        </div>

        <!-- Section 2: é—œéµç­–ç•¥ -->
        <div class="diagram-section">
          <h2 class="diagram-title">ğŸ¯ é—œéµç­–ç•¥</h2>

          <div class="strategy-block">
            <div class="strategy-title">1. é€£ç·šç‹€æ…‹åˆ¤æ–·ç­–ç•¥</div>
            <p><strong>åˆ¤æ–·ä¾æ“šï¼š</strong><span class="code-inline">ConnectionStats.connectionState</span></p>

            <div style="margin: 15px 0">
              <div style="margin: 8px 0">
                <strong>â€¢ å…è¨±éŒ„éŸ³ï¼š</strong><span class="code-inline">connectionState === 'CONNECTED'</span>
              </div>
              <div style="margin: 8px 0">
                <strong>â€¢ é¡¯ç¤ºé‡é€£ï¼š</strong><span class="code-inline">connectionState === 'RECONNECTING'</span>
              </div>
              <div style="margin: 8px 0">
                <strong>â€¢ ç¦ç”¨åŠŸèƒ½ï¼š</strong><span class="code-inline">connectionState === 'DISCONNECTED'</span>
              </div>
            </div>

            <div class="example-block">
              <div class="example-title">ğŸ”§ é—œéµé‚è¼¯ï¼š</div>
              <pre>
// æŒ‰éˆ•å•Ÿç”¨åˆ¤æ–·
const canStartRecording = computed(() =>
  connectionStats.connectionState === 'CONNECTED' &&
  recordingState.value === 'IDLE'
)

// è‡ªå‹•é‡é€£è§¸ç™¼
if (connectionStats.connectionState === 'DISCONNECTED' &&
    connectionStats.isAutoReconnectEnabled) {
  // è§¸ç™¼é‡é€£é‚è¼¯
}</pre
              >
            </div>
          </div>

          <div class="strategy-block">
            <div class="strategy-title">2. éŸ³è¨Š Chunk ç‹€æ…‹ç®¡ç†ç­–ç•¥</div>
            <p><strong>ç‹€æ…‹è½‰æ›åˆ¤æ–·ï¼š</strong><span class="code-inline">AudioChunk.status</span></p>

            <div style="margin: 15px 0">
              <div style="margin: 8px 0">
                <strong>â€¢ å¯é‡ç™¼åˆ¤æ–·ï¼š</strong
                ><span class="code-inline">status === 'PENDING' || status === 'ERROR'</span>
              </div>
              <div style="margin: 8px 0">
                <strong>â€¢ å®Œæˆåˆ¤æ–·ï¼š</strong><span class="code-inline">status === 'PROCESSED'</span>
              </div>
              <div style="margin: 8px 0"><strong>â€¢ çµ±è¨ˆè¨ˆç®—ï¼š</strong>æ ¹æ“šå„ç‹€æ…‹çš„ chunk æ•¸é‡</div>
            </div>

            <div class="example-block">
              <div class="example-title">ğŸ”§ é—œéµé‚è¼¯ï¼š</div>
              <pre>
// Pending Queue é‡ç™¼
const pendingChunks = chunkHistory.filter(chunk =>
  chunk.status === 'PENDING' || chunk.status === 'ERROR'
)

// å®Œæˆç‡è¨ˆç®—
const completionRate = processedChunks.length / totalChunks.length</pre
              >
            </div>
          </div>

          <div class="strategy-block">
            <div class="strategy-title">3. åºè™Ÿé€£çºŒæ€§ä¿è­‰ç­–ç•¥</div>
            <p>
              <strong>åˆ¤æ–·ä¾æ“šï¼š</strong><span class="code-inline">RecordingState</span> å’Œ
              <span class="code-inline">AudioChunk.sequenceNumber</span>
            </p>

            <div style="margin: 15px 0">
              <div style="margin: 8px 0">
                <strong>â€¢ æ–°æœƒè©±ï¼š</strong><span class="code-inline">RecordingState === 'IDLE'</span> æ™‚é‡ç½®åºè™Ÿç‚º 0
              </div>
              <div style="margin: 8px 0">
                <strong>â€¢ æš«åœæ¢å¾©ï¼š</strong><span class="code-inline">RecordingState === 'PAUSED'</span> æ™‚ä¿æŒåºè™Ÿ
              </div>
              <div style="margin: 8px 0">
                <strong>â€¢ åºè™Ÿåˆ†é…ï¼š</strong>æ¯å€‹æ–° chunk çš„
                <span class="code-inline">sequenceNumber = ++chunkCounter</span>
              </div>
            </div>

            <div class="example-block">
              <div class="example-title">ğŸ”§ é—œéµé‚è¼¯ï¼š</div>
              <pre>
// åºè™Ÿç®¡ç†
if (recordingState === RecordingState.IDLE) {
  chunkCounter = 0  // æ–°æœƒè©±é‡ç½®
} else {
  // æš«åœæ¢å¾©æ™‚ä¿æŒ chunkCounter ä¸è®Š
}

// æ–° chunk åºè™Ÿ
const newChunk: AudioChunk = {
  sequenceNumber: ++chunkCounter,  // é€£çºŒéå¢
  // ... å…¶ä»–å±¬æ€§
}</pre
              >
            </div>
          </div>

          <div class="strategy-block">
            <div class="strategy-title">4. å¿ƒè·³æ©Ÿåˆ¶ç­–ç•¥</div>
            <p>
              <strong>åˆ¤æ–·ä¾æ“šï¼š</strong><span class="code-inline">ConnectionStats.heartbeatInterval</span> å’Œ
              <span class="code-inline">lastHeartbeatTime</span>
            </p>

            <div style="margin: 15px 0">
              <div style="margin: 8px 0">
                <strong>â€¢ ç™¼é€é€±æœŸï¼š</strong>æ¯ <span class="code-inline">heartbeatInterval</span> æ¯«ç§’ç™¼é€ä¸€æ¬¡ PING
              </div>
              <div style="margin: 8px 0"><strong>â€¢ è¶…æ™‚åˆ¤æ–·ï¼š</strong>8 ç§’å…§æœªæ”¶åˆ° PONG è¦–ç‚ºæ–·ç·š</div>
              <div style="margin: 8px 0"><strong>â€¢ æ–·ç·šè§¸ç™¼ï¼š</strong>è‡ªå‹•å•Ÿç”¨é‡é€£æ©Ÿåˆ¶</div>
            </div>

            <div class="example-block">
              <div class="example-title">ğŸ”§ é—œéµé‚è¼¯ï¼š</div>
              <pre>
// å¿ƒè·³è¶…æ™‚æª¢æ¸¬
const heartbeatTimeout = 8000
const timeSinceLastPong = Date.now() - lastHeartbeatTime

if (timeSinceLastPong > heartbeatTimeout) {
  connectionState = 'RECONNECTING'
  // è§¸ç™¼é‡é€£
}</pre
              >
            </div>
          </div>

          <div class="data-format-container">
            <h3 style="color: #2c3e50; margin-bottom: 20px">ğŸ“Š è³‡æ–™æµå‘ç¸½è¦½</h3>
            <div class="example-block">
              <pre>
[MediaRecorder] â†’ [AudioChunk{PENDING}] â†’ [WebSocketç™¼é€] â†’ [AudioChunk{SENT}]
     â†“                                                              â†“
[éŒ„éŸ³ä¸­æ–·æ™‚]                                                    [æ”¶åˆ°ACK]
     â†“                                                              â†“
[PendingQueue]                                              [AudioChunk{RECEIVED}]
     â†“                                                              â†“
[é‡é€£æˆåŠŸé‡ç™¼]                                              [ä¼ºæœå™¨è™•ç†å®Œæˆ]
     â†“                                                              â†“
[æ¢å¾©æ­£å¸¸æµç¨‹]                                          [AudioChunk{PROCESSED}]</pre
              >
            </div>
          </div>
        </div>

        <!-- Section 3: ç³»çµ±æ¶æ§‹ (ä¿ç•™åŸæœ‰å…§å®¹) -->
        <div class="diagram-section">
          <h2 class="diagram-title">ğŸ—ï¸ ç³»çµ±æ•´é«”æ¶æ§‹åœ–</h2>
          <div class="diagram-container">
            <svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
              <!-- UIå±¤ -->
              <g id="ui-layer">
                <rect x="50" y="50" width="120" height="60" fill="#ff9999" stroke="#333" stroke-width="2" rx="5" />
                <text x="110" y="85" text-anchor="middle" font-size="14">éŒ„éŸ³æ§åˆ¶æŒ‰éˆ•</text>

                <rect x="190" y="50" width="120" height="60" fill="#ffcc99" stroke="#333" stroke-width="2" rx="5" />
                <text x="250" y="85" text-anchor="middle" font-size="14">ç‹€æ…‹æŒ‡ç¤ºå™¨</text>

                <rect x="330" y="50" width="120" height="60" fill="#ffcc99" stroke="#333" stroke-width="2" rx="5" />
                <text x="390" y="85" text-anchor="middle" font-size="14">Chunkç‹€æ…‹é¢æ¿</text>
              </g>

              <!-- æ¥­å‹™é‚è¼¯å±¤ -->
              <g id="logic-layer">
                <rect x="120" y="150" width="160" height="60" fill="#99ccff" stroke="#333" stroke-width="2" rx="5" />
                <text x="200" y="185" text-anchor="middle" font-size="14">useAudioPage</text>
              </g>

              <!-- æ ¸å¿ƒæœå‹™å±¤ -->
              <g id="service-layer">
                <rect x="50" y="250" width="180" height="60" fill="#99ccff" stroke="#333" stroke-width="2" rx="5" />
                <text x="140" y="275" text-anchor="middle" font-size="12">useRealTime</text>
                <text x="140" y="295" text-anchor="middle" font-size="12">AudioRecorder</text>

                <rect x="250" y="250" width="160" height="60" fill="#ccffcc" stroke="#333" stroke-width="2" rx="5" />
                <text x="330" y="285" text-anchor="middle" font-size="14">useAudioStream</text>
              </g>

              <!-- ç€è¦½å™¨ API -->
              <g id="api-layer">
                <rect x="50" y="350" width="150" height="60" fill="#e3f2fd" stroke="#333" stroke-width="2" rx="5" />
                <text x="125" y="385" text-anchor="middle" font-size="14">MediaRecorder</text>

                <rect x="220" y="350" width="150" height="60" fill="#e3f2fd" stroke="#333" stroke-width="2" rx="5" />
                <text x="295" y="385" text-anchor="middle" font-size="14">WebSocket API</text>
              </g>

              <!-- ä¼ºæœå™¨ç«¯ -->
              <g id="server">
                <rect x="500" y="200" width="180" height="80" fill="#99ff99" stroke="#333" stroke-width="2" rx="5" />
                <text x="590" y="235" text-anchor="middle" font-size="14">WebSocket Server</text>
                <text x="590" y="255" text-anchor="middle" font-size="12">è¨Šæ¯è™•ç†å™¨</text>
              </g>

              <!-- é€£æ¥ç·š -->
              <line x1="110" y1="110" x2="200" y2="150" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)" />
              <line x1="250" y1="110" x2="200" y2="150" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)" />
              <line x1="390" y1="110" x2="200" y2="150" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)" />

              <line x1="140" y1="210" x2="140" y2="250" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)" />
              <line x1="260" y1="210" x2="330" y2="250" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)" />

              <line x1="125" y1="310" x2="125" y2="350" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)" />
              <line x1="330" y1="310" x2="295" y2="350" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)" />

              x1="370" y1="380" x2="500" y2="240" stroke="#666" stroke-width="2" stroke-dasharray="5,5"
              marker-end="url(#arrowhead)" />

              <!-- ç®­é ­å®šç¾© -->
              <defs>
                <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                  <polygon points="0 0, 10 3, 0 6" fill="#666" />
                </marker>
              </defs>

              <!-- åœ–å±¤æ¨™ç±¤ -->
              <text x="10" y="80" font-size="12" fill="#666">UIå±¤</text>
              <text x="10" y="180" font-size="12" fill="#666">é‚è¼¯å±¤</text>
              <text x="10" y="280" font-size="12" fill="#666">æœå‹™å±¤</text>
              <text x="10" y="380" font-size="12" fill="#666">APIå±¤</text>
              <text x="500" y="190" font-size="12" fill="#666">å¾Œç«¯</text>
            </svg>
          </div>
        </div>

        <!-- Section 4: éŸ³è¨ŠéŒ„è£½æµç¨‹ -->
        <div class="diagram-section">
          <h2 class="diagram-title">ğŸ™ï¸ éŸ³è¨ŠéŒ„è£½æµç¨‹åœ–</h2>
          <div class="diagram-container">
            <svg viewBox="0 0 900 700" xmlns="http://www.w3.org/2000/svg">
              <!-- é–‹å§‹ -->
              <ellipse cx="450" cy="50" rx="50" ry="30" fill="#e8f5e8" stroke="#333" stroke-width="2" />
              <text x="450" y="55" text-anchor="middle" font-size="14">é–‹å§‹</text>

              <!-- å–å¾—æ¬Šé™ -->
              <rect x="380" y="100" width="140" height="50" fill="#e3f2fd" stroke="#333" stroke-width="2" rx="5" />
              <text x="450" y="130" text-anchor="middle" font-size="13">å–å¾—éº¥å…‹é¢¨æ¬Šé™</text>

              <!-- å»ºç«‹ Recorder -->
              <rect x="380" y="170" width="140" height="50" fill="#e3f2fd" stroke="#333" stroke-width="2" rx="5" />
              <text x="450" y="200" text-anchor="middle" font-size="13">å»ºç«‹MediaRecorder</text>

              <!-- è¨­å®šå®šæ™‚å™¨ -->
              <rect x="380" y="240" width="140" height="50" fill="#e3f2fd" stroke="#333" stroke-width="2" rx="5" />
              <text x="450" y="270" text-anchor="middle" font-size="13">è¨­å®š3ç§’å®šæ™‚å™¨</text>

              <!-- é–‹å§‹éŒ„è£½ -->
              <rect x="380" y="310" width="140" height="50" fill="#e1f5fe" stroke="#333" stroke-width="2" rx="5" />
              <text x="450" y="340" text-anchor="middle" font-size="13">é–‹å§‹éŒ„è£½</text>

              <!-- éŒ„è£½ä¸­åˆ¤æ–· -->
              <path d="M 450 380 L 520 420 L 450 460 L 380 420 Z" fill="#f3e5f5" stroke="#333" stroke-width="2" />
              <text x="450" y="425" text-anchor="middle" font-size="13">éŒ„è£½ä¸­</text>

              <!-- 3ç§’åˆ°æœŸ -->
              <rect x="550" y="395" width="120" height="50" fill="#fff3e0" stroke="#333" stroke-width="2" rx="5" />
              <text x="610" y="420" text-anchor="middle" font-size="12">åœæ­¢ç•¶å‰</text>
              <text x="610" y="435" text-anchor="middle" font-size="12">Chunk</text>

              <!-- æš«åœ -->
              <rect x="230" y="480" width="100" height="50" fill="#fff3e0" stroke="#333" stroke-width="2" rx="5" />
              <text x="280" y="510" text-anchor="middle" font-size="12">æš«åœæµç¨‹</text>

              <!-- åœæ­¢ -->
              <rect x="380" y="520" width="100" height="50" fill="#ffebee" stroke="#333" stroke-width="2" rx="5" />
              <text x="430" y="550" text-anchor="middle" font-size="12">åœæ­¢æµç¨‹</text>

              <!-- è™•ç† Chunk -->
              <rect x="690" y="395" width="120" height="50" fill="#e8f5e8" stroke="#333" stroke-width="2" rx="5" />
              <text x="750" y="425" text-anchor="middle" font-size="12">è™•ç†ä¸¦å‚³é€</text>

              <!-- çµæŸ -->
              <ellipse cx="430" cy="620" rx="50" ry="30" fill="#e8f5e8" stroke="#333" stroke-width="2" />
              <text x="430" y="625" text-anchor="middle" font-size="14">çµæŸ</text>

              <!-- é€£æ¥ç·š -->
              <line x1="450" y1="80" x2="450" y2="100" stroke="#333" stroke-width="2" marker-end="url(#arrow4)" />
              <line x1="450" y1="150" x2="450" y2="170" stroke="#333" stroke-width="2" marker-end="url(#arrow4)" />
              <line x1="450" y1="220" x2="450" y2="240" stroke="#333" stroke-width="2" marker-end="url(#arrow4)" />
              <line x1="450" y1="290" x2="450" y2="310" stroke="#333" stroke-width="2" marker-end="url(#arrow4)" />
              <line x1="450" y1="360" x2="450" y2="380" stroke="#333" stroke-width="2" marker-end="url(#arrow4)" />

              <line x1="520" y1="420" x2="550" y2="420" stroke="#333" stroke-width="2" marker-end="url(#arrow4)" />
              <text x="535" y="415" font-size="11" fill="#666">3ç§’</text>

              <line x1="670" y1="420" x2="690" y2="420" stroke="#333" stroke-width="2" marker-end="url(#arrow4)" />

              <line x1="750" y1="395" x2="750" y2="340" stroke="#333" stroke-width="2" />
              <line x1="750" y1="340" x2="520" y2="340" stroke="#333" stroke-width="2" />
              <line x1="520" y1="340" x2="520" y2="310" stroke="#333" stroke-width="2" marker-end="url(#arrow4)" />

              <line x1="380" y1="420" x2="330" y2="420" stroke="#333" stroke-width="2" />
              <line x1="330" y1="420" x2="330" y2="480" stroke="#333" stroke-width="2" marker-end="url(#arrow4)" />
              <text x="340" y="450" font-size="11" fill="#666">æš«åœ</text>

              <line x1="450" y1="460" x2="450" y2="520" stroke="#333" stroke-width="2" marker-end="url(#arrow4)" />
              <text x="460" y="490" font-size="11" fill="#666">åœæ­¢</text>

              <line x1="430" y1="570" x2="430" y2="590" stroke="#333" stroke-width="2" marker-end="url(#arrow4)" />

              <!-- æš«åœæ¢å¾© -->
              <line x1="230" y1="505" x2="190" y2="505" stroke="#333" stroke-width="2" />
              <line x1="190" y1="505" x2="190" y2="195" stroke="#333" stroke-width="2" />
              <line x1="190" y1="195" x2="380" y2="195" stroke="#333" stroke-width="2" marker-end="url(#arrow4)" />
              <text x="200" y="350" font-size="11" fill="#666">ç¹¼çºŒ</text>

              <defs>
                <marker id="arrow4" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                  <polygon points="0 0, 10 3, 0 6" fill="#333" />
                </marker>
              </defs>
            </svg>
          </div>
        </div>

        <!-- Section 5: WebSocket é€£ç·šç‹€æ…‹åœ– -->
        <div class="diagram-section">
          <h2 class="diagram-title">ğŸŒ WebSocket é€£ç·šç‹€æ…‹åœ–</h2>
          <div class="diagram-container">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
              <!-- åˆå§‹åŒ– -->
              <rect x="50" y="50" width="120" height="60" fill="#e3f2fd" stroke="#333" stroke-width="2" rx="5" />
              <text x="110" y="85" text-anchor="middle" font-size="14">åˆå§‹åŒ–</text>

              <!-- é€£ç·šä¸­ -->
              <rect x="250" y="50" width="120" height="60" fill="#fff3e0" stroke="#333" stroke-width="2" rx="5" />
              <text x="310" y="85" text-anchor="middle" font-size="14">é€£ç·šä¸­</text>

              <!-- å·²é€£ç·š -->
              <rect x="450" y="50" width="120" height="60" fill="#e8f5e8" stroke="#333" stroke-width="2" rx="5" />
              <text x="510" y="85" text-anchor="middle" font-size="14">å·²é€£ç·š</text>

              <!-- å‚³è¼¸ä¸­ -->
              <rect x="650" y="50" width="120" height="60" fill="#e8f5e8" stroke="#333" stroke-width="2" rx="5" />
              <text x="710" y="85" text-anchor="middle" font-size="14">å‚³è¼¸ä¸­</text>

              <!-- æ–·ç·šæª¢æ¸¬ -->
              <rect x="450" y="200" width="120" height="60" fill="#fff3e0" stroke="#333" stroke-width="2" rx="5" />
              <text x="510" y="235" text-anchor="middle" font-size="14">æ–·ç·šæª¢æ¸¬</text>

              <!-- é‡é€£ä¸­ -->
              <rect x="250" y="200" width="120" height="60" fill="#fff3e0" stroke="#333" stroke-width="2" rx="5" />
              <text x="310" y="235" text-anchor="middle" font-size="14">é‡é€£ä¸­</text>

              <!-- é€£ç·šå¤±æ•— -->
              <rect x="50" y="200" width="120" height="60" fill="#ffebee" stroke="#333" stroke-width="2" rx="5" />
              <text x="110" y="235" text-anchor="middle" font-size="14">é€£ç·šå¤±æ•—</text>

              <!-- éŒ¯èª¤ç‹€æ…‹ -->
              <rect x="50" y="350" width="120" height="60" fill="#ffcdd2" stroke="#333" stroke-width="2" rx="5" />
              <text x="110" y="385" text-anchor="middle" font-size="14">éŒ¯èª¤ç‹€æ…‹</text>

              <!-- é€£æ¥ç·š -->
              <line x1="170" y1="80" x2="250" y2="80" stroke="#333" stroke-width="2" marker-end="url(#arrow5)" />
              <line x1="370" y1="80" x2="450" y2="80" stroke="#333" stroke-width="2" marker-end="url(#arrow5)" />
              <line x1="570" y1="80" x2="650" y2="80" stroke="#333" stroke-width="2" marker-end="url(#arrow5)" />

              <line x1="710" y1="110" x2="710" y2="150" stroke="#333" stroke-width="2" />
              <line x1="710" y1="150" x2="510" y2="150" stroke="#333" stroke-width="2" />
              <line x1="510" y1="150" x2="510" y2="110" stroke="#333" stroke-width="2" marker-end="url(#arrow5)" />
              <text x="600" y="140" font-size="11" fill="#666">å®Œæˆ</text>

              <line x1="510" y1="110" x2="510" y2="200" stroke="#333" stroke-width="2" marker-end="url(#arrow5)" />
              <line x1="710" y1="110" x2="710" y2="230" stroke="#333" stroke-width="2" />
              <line x1="710" y1="230" x2="570" y2="230" stroke="#333" stroke-width="2" marker-end="url(#arrow5)" />

              <line x1="450" y1="230" x2="370" y2="230" stroke="#333" stroke-width="2" marker-end="url(#arrow5)" />
              <line x1="250" y1="230" x2="170" y2="230" stroke="#333" stroke-width="2" marker-end="url(#arrow5)" />

              <line x1="310" y1="200" x2="310" y2="80" stroke="#333" stroke-width="2" marker-end="url(#arrow5)" />
              <line x1="110" y1="200" x2="110" y2="110" stroke="#333" stroke-width="2" marker-end="url(#arrow5)" />

              <line x1="110" y1="260" x2="110" y2="350" stroke="#333" stroke-width="2" marker-end="url(#arrow5)" />
              <text x="120" y="305" font-size="11" fill="#666">è¶…é20æ¬¡</text>

              <defs>
                <marker id="arrow5" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                  <polygon points="0 0, 10 3, 0 6" fill="#333" />
                </marker>
              </defs>

              <!-- èªªæ˜æ–‡å­— -->
              <text x="400" y="480" font-size="12" fill="#666">å¿ƒè·³æ©Ÿåˆ¶ï¼šæ¯5ç§’ç™¼é€PINGï¼Œç­‰å¾…PONGå›æ‡‰</text>
            </svg>
          </div>
        </div>

        <!-- Section 6: Chunk è™•ç†æµç¨‹åœ– -->
        <div class="diagram-section">
          <h2 class="diagram-title">ğŸ“¦ Chunk è™•ç†æµç¨‹åœ–</h2>

          <h3 class="diagram-subtitle">ğŸ“¦ Chunk ç‹€æ…‹ç”Ÿå‘½é€±æœŸ</h3>
          <div class="diagram-container">
            <svg viewBox="0 0 800 400" xmlns="http://www.w3.org/2000/svg">
              <!-- ç”¢ç”Ÿä¸­ -->
              <rect x="50" y="50" width="120" height="60" fill="#e3f2fd" stroke="#333" stroke-width="2" rx="5" />
              <text x="110" y="85" text-anchor="middle" font-size="14">ç”¢ç”Ÿä¸­</text>

              <!-- PENDING -->
              <rect x="250" y="50" width="120" height="60" fill="#fff3e0" stroke="#333" stroke-width="2" rx="5" />
              <text x="310" y="85" text-anchor="middle" font-size="14">PENDING</text>

              <!-- SENT -->
              <rect x="450" y="50" width="120" height="60" fill="#e3f2fd" stroke="#333" stroke-width="2" rx="5" />
              <text x="510" y="85" text-anchor="middle" font-size="14">SENT</text>

              <!-- RECEIVED -->
              <rect x="650" y="50" width="120" height="60" fill="#e8f5e8" stroke="#333" stroke-width="2" rx="5" />
              <text x="710" y="85" text-anchor="middle" font-size="14">RECEIVED</text>

              <!-- QUEUED -->
              <rect x="250" y="180" width="120" height="60" fill="#fff3e0" stroke="#333" stroke-width="2" rx="5" />
              <text x="310" y="215" text-anchor="middle" font-size="14">QUEUED</text>

              <!-- ERROR -->
              <rect x="450" y="180" width="120" height="60" fill="#ffebee" stroke="#333" stroke-width="2" rx="5" />
              <text x="510" y="215" text-anchor="middle" font-size="14">ERROR</text>

              <!-- PROCESSED -->
              <rect x="650" y="300" width="120" height="60" fill="#e8f5e8" stroke="#333" stroke-width="2" rx="5" />
              <text x="710" y="335" text-anchor="middle" font-size="14">PROCESSED</text>

              <!-- FAILED -->
              <rect x="450" y="300" width="120" height="60" fill="#ffcdd2" stroke="#333" stroke-width="2" rx="5" />
              <text x="510" y="335" text-anchor="middle" font-size="14">FAILED</text>

              <!-- é€£æ¥ç·š -->
              <line x1="170" y1="80" x2="250" y2="80" stroke="#333" stroke-width="2" marker-end="url(#arrow6)" />
              <line x1="370" y1="80" x2="450" y2="80" stroke="#333" stroke-width="2" marker-end="url(#arrow6)" />
              <text x="410" y="75" font-size="11" fill="#666">å‚³é€</text>

              <line x1="570" y1="80" x2="650" y2="80" stroke="#333" stroke-width="2" marker-end="url(#arrow6)" />
              <text x="610" y="75" font-size="11" fill="#666">ç¢ºèª</text>

              <line x1="310" y1="110" x2="310" y2="180" stroke="#333" stroke-width="2" marker-end="url(#arrow6)" />
              <text x="320" y="145" font-size="11" fill="#666">æ–·ç·š</text>

              <line x1="510" y1="110" x2="510" y2="180" stroke="#333" stroke-width="2" marker-end="url(#arrow6)" />
              <text x="520" y="145" font-size="11" fill="#666">å¤±æ•—</text>

              <line x1="370" y1="210" x2="450" y2="210" stroke="#333" stroke-width="2" marker-end="url(#arrow6)" />
              <text x="410" y="205" font-size="11" fill="#666">é‡é€£</text>

              <line x1="510" y1="240" x2="510" y2="300" stroke="#333" stroke-width="2" marker-end="url(#arrow6)" />
              <text x="520" y="270" font-size="11" fill="#666">è¶…éé‡è©¦</text>

              <line x1="710" y1="110" x2="710" y2="300" stroke="#333" stroke-width="2" marker-end="url(#arrow6)" />
              <text x="720" y="205" font-size="11" fill="#666">è™•ç†å®Œæˆ</text>

              <defs>
                <marker id="arrow6" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                  <polygon points="0 0, 10 3, 0 6" fill="#333" />
                </marker>
              </defs>

              <!-- èªªæ˜ -->
              <text x="50" y="390" font-size="11" fill="#666">
                è¨»ï¼šPENDING = ç­‰å¾…å‚³é€ | QUEUED = æ–·ç·šæš«å­˜ | SENT = å·²å‚³é€
              </text>
            </svg>
          </div>
        </div>

        <!-- Section 7: æš«åœæ¢å¾©æ©Ÿåˆ¶åœ– -->
        <div class="diagram-section">
          <h2 class="diagram-title">â¯ï¸ æš«åœæ¢å¾©æ©Ÿåˆ¶åœ–</h2>

          <h3 class="diagram-subtitle">â¸ï¸ æš«åœé‚è¼¯æµç¨‹</h3>
          <div class="diagram-container">
            <svg viewBox="0 0 900 650" xmlns="http://www.w3.org/2000/svg">
              <!-- é»æ“Šæš«åœ -->
              <rect x="380" y="50" width="140" height="50" fill="#ff9999" stroke="#333" stroke-width="2" rx="5" />
              <text x="450" y="80" text-anchor="middle" font-size="13">ä½¿ç”¨è€…é»æ“Šæš«åœ</text>

              <!-- æ¸…é™¤å®šæ™‚å™¨ -->
              <rect x="380" y="120" width="140" height="50" fill="#ffcc99" stroke="#333" stroke-width="2" rx="5" />
              <text x="450" y="150" text-anchor="middle" font-size="13">æ¸…é™¤å®šæ™‚å™¨</text>

              <!-- è¨­ç½® isPausing -->
              <rect x="380" y="190" width="140" height="50" fill="#ffcc99" stroke="#333" stroke-width="2" rx="5" />
              <text x="450" y="220" text-anchor="middle" font-size="13">è¨­ç½® isPausing</text>

              <!-- å¼·åˆ¶åœæ­¢ -->
              <rect x="380" y="260" width="140" height="50" fill="#ffcc99" stroke="#333" stroke-width="2" rx="5" />
              <text x="450" y="285" text-anchor="middle" font-size="12">å¼·åˆ¶åœæ­¢</text>
              <text x="450" y="300" text-anchor="middle" font-size="12">MediaRecorder</text>

              <!-- è§¸ç™¼ onstop -->
              <rect x="380" y="330" width="140" height="50" fill="#fff3e0" stroke="#333" stroke-width="2" rx="5" />
              <text x="450" y="360" text-anchor="middle" font-size="13">è§¸ç™¼ onstop äº‹ä»¶</text>

              <!-- è¨ˆç®—æ™‚é•· -->
              <rect x="380" y="400" width="140" height="50" fill="#e3f2fd" stroke="#333" stroke-width="2" rx="5" />
              <text x="450" y="430" text-anchor="middle" font-size="13">è¨ˆç®—å¯¦éš›æ™‚é•·</text>

              <!-- æ™‚é•·æª¢æŸ¥ -->
              <path d="M 450 470 L 520 500 L 450 530 L 380 500 Z" fill="#fff3e0" stroke="#333" stroke-width="2" />
              <text x="450" y="505" text-anchor="middle" font-size="12">æ™‚é•· > 0?</text>

              <!-- æœ‰æ•ˆ Chunk -->
              <rect x="580" y="475" width="100" height="50" fill="#e8f5e8" stroke="#333" stroke-width="2" rx="5" />
              <text x="630" y="505" text-anchor="middle" font-size="12">æœ‰æ•ˆChunk</text>

              <!-- è·³é -->
              <rect x="250" y="475" width="100" height="50" fill="#ffebee" stroke="#333" stroke-width="2" rx="5" />
              <text x="300" y="505" text-anchor="middle" font-size="12">è·³é</text>

              <!-- å‚³é€ -->
              <rect x="580" y="545" width="100" height="50" fill="#e3f2fd" stroke="#333" stroke-width="2" rx="5" />
              <text x="630" y="575" text-anchor="middle" font-size="12">å‚³é€ä¼ºæœå™¨</text>

              <!-- ç‹€æ…‹ PAUSED -->
              <rect x="380" y="545" width="140" height="50" fill="#99ccff" stroke="#333" stroke-width="2" rx="5" />
              <text x="450" y="575" text-anchor="middle" font-size="13">ç‹€æ…‹: PAUSED</text>

              <!-- æš«åœå®Œæˆ -->
              <rect x="380" y="615" width="140" height="50" fill="#99ff99" stroke="#333" stroke-width="2" rx="5" />
              <text x="450" y="645" text-anchor="middle" font-size="13">æš«åœå®Œæˆ</text>

              <!-- é€£æ¥ç·š -->
              <line x1="450" y1="100" x2="450" y2="120" stroke="#333" stroke-width="2" marker-end="url(#arrow7)" />
              <line x1="450" y1="170" x2="450" y2="190" stroke="#333" stroke-width="2" marker-end="url(#arrow7)" />
              <line x1="450" y1="240" x2="450" y2="260" stroke="#333" stroke-width="2" marker-end="url(#arrow7)" />
              <line x1="450" y1="310" x2="450" y2="330" stroke="#333" stroke-width="2" marker-end="url(#arrow7)" />
              <line x1="450" y1="380" x2="450" y2="400" stroke="#333" stroke-width="2" marker-end="url(#arrow7)" />
              <line x1="450" y1="450" x2="450" y2="470" stroke="#333" stroke-width="2" marker-end="url(#arrow7)" />

              <line x1="520" y1="500" x2="580" y2="500" stroke="#333" stroke-width="2" marker-end="url(#arrow7)" />
              <text x="550" y="495" font-size="11" fill="#666">æ˜¯</text>

              <line x1="380" y1="500" x2="350" y2="500" stroke="#333" stroke-width="2" marker-end="url(#arrow7)" />
              <text x="365" y="495" font-size="11" fill="#666">å¦</text>

              <line x1="630" y1="525" x2="630" y2="545" stroke="#333" stroke-width="2" marker-end="url(#arrow7)" />
              <line x1="630" y1="570" x2="630" y2="570" stroke="#333" stroke-width="2" />
              <line x1="630" y1="570" x2="520" y2="570" stroke="#333" stroke-width="2" marker-end="url(#arrow7)" />

              <line x1="300" y1="525" x2="300" y2="570" stroke="#333" stroke-width="2" />
              <line x1="300" y1="570" x2="380" y2="570" stroke="#333" stroke-width="2" marker-end="url(#arrow7)" />

              <line x1="450" y1="595" x2="450" y2="615" stroke="#333" stroke-width="2" marker-end="url(#arrow7)" />

              <defs>
                <marker id="arrow7" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                  <polygon points="0 0, 10 3, 0 6" fill="#333" />
                </marker>
              </defs>

              <!-- èªªæ˜ -->
              <text x="700" y="280" font-size="11" fill="#666">ä¿ç•™åºåˆ—è¨ˆæ•¸å™¨</text>
              <text x="700" y="295" font-size="11" fill="#666">åœæ­¢éŸ³è¨Šä¸²æµ</text>
            </svg>
          </div>
        </div>

        <!-- Section 8: æ–·ç·šé‡é€£æµç¨‹åœ– -->
        <div class="diagram-section">
          <h2 class="diagram-title">ğŸ”„ æ–·ç·šé‡é€£æµç¨‹åœ–</h2>

          <h3 class="diagram-subtitle">ğŸ”„ æ–·ç·šæª¢æ¸¬èˆ‡é‡é€£æ©Ÿåˆ¶</h3>
          <div class="diagram-container">
            <svg viewBox="0 0 900 700" xmlns="http://www.w3.org/2000/svg">
              <!-- æ­£å¸¸é€£ç·š -->
              <rect x="380" y="50" width="140" height="50" fill="#e8f5e8" stroke="#333" stroke-width="2" rx="5" />
              <text x="450" y="80" text-anchor="middle" font-size="13">æ­£å¸¸é€£ç·šç‹€æ…‹</text>

              <!-- å¿ƒè·³å¤±æ•—åˆ¤æ–· -->
              <path d="M 450 120 L 520 150 L 450 180 L 380 150 Z" fill="#fff3e0" stroke="#333" stroke-width="2" />
              <text x="450" y="155" text-anchor="middle" font-size="12">å¿ƒè·³å¤±æ•—?</text>

              <!-- ç¹¼çºŒå¿ƒè·³ -->
              <rect x="580" y="125" width="120" height="50" fill="#e8f5e8" stroke="#333" stroke-width="2" rx="5" />
              <text x="640" y="155" text-anchor="middle" font-size="12">ç¹¼çºŒå¿ƒè·³æª¢æ¸¬</text>

              <!-- æª¢æ¸¬æ–·ç·š -->
              <rect x="380" y="200" width="140" height="50" fill="#ffebee" stroke="#333" stroke-width="2" rx="5" />
              <text x="450" y="230" text-anchor="middle" font-size="12">æª¢æ¸¬åˆ°æ–·ç·š</text>

              <!-- è¨­å®šç‹€æ…‹ -->
              <rect x="380" y="270" width="140" height="50" fill="#ffebee" stroke="#333" stroke-width="2" rx="5" />
              <text x="450" y="300" text-anchor="middle" font-size="12">è¨­å®šç‹€æ…‹: DISCONNECTED</text>

              <!-- Chunk å…¥ Queue -->
              <rect x="380" y="340" width="140" height="50" fill="#fff3e0" stroke="#333" stroke-width="2" rx="5" />
              <text x="450" y="370" text-anchor="middle" font-size="12">Chunk é€²å…¥ Pending Queue</text>

              <!-- é‡é€£æ¬¡æ•¸åˆ¤æ–· -->
              <path d="M 450 410 L 520 440 L 450 470 L 380 440 Z" fill="#fff3e0" stroke="#333" stroke-width="2" />
              <text x="450" y="445" text-anchor="middle" font-size="11">é‡é€£æ¬¡æ•¸ < 20?</text>

              <!-- ERROR ç‹€æ…‹ -->
              <rect x="230" y="415" width="120" height="50" fill="#ffcdd2" stroke="#333" stroke-width="2" rx="5" />
              <text x="290" y="445" text-anchor="middle" font-size="12">ERROR ç‹€æ…‹</text>

              <!-- ç­‰å¾… 2 ç§’ -->
              <rect x="580" y="415" width="120" height="50" fill="#fff3e0" stroke="#333" stroke-width="2" rx="5" />
              <text x="640" y="445" text-anchor="middle" font-size="12">ç­‰å¾… 2 ç§’</text>

              <!-- å˜—è©¦é€£ç·š -->
              <rect x="580" y="485" width="120" height="50" fill="#e3f2fd" stroke="#333" stroke-width="2" rx="5" />
              <text x="640" y="515" text-anchor="middle" font-size="12">å˜—è©¦é‡æ–°é€£ç·š</text>

              <!-- é€£ç·šçµæœåˆ¤æ–· -->
              <path d="M 640 555 L 700 585 L 640 615 L 580 585 Z" fill="#fff3e0" stroke="#333" stroke-width="2" />
              <text x="640" y="590" text-anchor="middle" font-size="12">é€£ç·šçµæœ</text>

              <!-- æ¢å¾©é€£ç·š -->
              <rect x="380" y="560" width="140" height="50" fill="#e8f5e8" stroke="#333" stroke-width="2" rx="5" />
              <text x="450" y="590" text-anchor="middle" font-size="12">æ¢å¾©é€£ç·šæˆåŠŸ</text>

              <!-- æ¬¡æ•¸+1 -->
              <rect x="720" y="560" width="100" height="50" fill="#fff3e0" stroke="#333" stroke-width="2" rx="5" />
              <text x="770" y="590" text-anchor="middle" font-size="11">é‡é€£æ¬¡æ•¸+1</text>

              <!-- é€£æ¥ç·š -->
              <line x1="450" y1="100" x2="450" y2="120" stroke="#333" stroke-width="2" marker-end="url(#arrow8)" />

              <line x1="520" y1="150" x2="580" y2="150" stroke="#333" stroke-width="2" marker-end="url(#arrow8)" />
              <text x="550" y="145" font-size="11" fill="#666">å¦</text>

              <line x1="640" y1="125" x2="640" y2="75" stroke="#333" stroke-width="2" />
              <line x1="640" y1="75" x2="520" y2="75" stroke="#333" stroke-width="2" marker-end="url(#arrow8)" />

              <line x1="450" y1="180" x2="450" y2="200" stroke="#333" stroke-width="2" marker-end="url(#arrow8)" />
              <text x="460" y="195" font-size="11" fill="#666">æ˜¯</text>

              <line x1="450" y1="250" x2="450" y2="270" stroke="#333" stroke-width="2" marker-end="url(#arrow8)" />
              <line x1="450" y1="320" x2="450" y2="340" stroke="#333" stroke-width="2" marker-end="url(#arrow8)" />
              <line x1="450" y1="390" x2="450" y2="410" stroke="#333" stroke-width="2" marker-end="url(#arrow8)" />

              <line x1="380" y1="440" x2="350" y2="440" stroke="#333" stroke-width="2" marker-end="url(#arrow8)" />
              <text x="365" y="435" font-size="11" fill="#666">å¦</text>

              <line x1="520" y1="440" x2="580" y2="440" stroke="#333" stroke-width="2" marker-end="url(#arrow8)" />
              <text x="550" y="435" font-size="11" fill="#666">æ˜¯</text>

              <line x1="640" y1="465" x2="640" y2="485" stroke="#333" stroke-width="2" marker-end="url(#arrow8)" />
              <line x1="640" y1="535" x2="640" y2="555" stroke="#333" stroke-width="2" marker-end="url(#arrow8)" />

              <line x1="580" y1="585" x2="520" y2="585" stroke="#333" stroke-width="2" marker-end="url(#arrow8)" />
              <text x="550" y="580" font-size="11" fill="#666">æˆåŠŸ</text>

              <line x1="700" y1="585" x2="720" y2="585" stroke="#333" stroke-width="2" marker-end="url(#arrow8)" />
              <text x="710" y="580" font-size="11" fill="#666">å¤±æ•—</text>

              <line x1="770" y1="560" x2="770" y2="440" stroke="#333" stroke-width="2" />
              <line x1="770" y1="440" x2="520" y2="440" stroke="#333" stroke-width="2" marker-end="url(#arrow8)" />

              <line x1="450" y1="560" x2="450" y2="75" stroke="#333" stroke-width="2" />
              <line x1="450" y1="75" x2="520" y2="75" stroke="#333" stroke-width="2" marker-end="url(#arrow8)" />

              <defs>
                <marker id="arrow8" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                  <polygon points="0 0, 10 3, 0 6" fill="#333" />
                </marker>
              </defs>
            </svg>
          </div>
        </div>

        <!-- Section 9: éŸ³è¨Šåˆä½µè™•ç†åœ– -->
        <div class="diagram-section">
          <h2 class="diagram-title">ğŸµ éŸ³è¨Šåˆä½µè™•ç†åœ–</h2>

          <h3 class="diagram-subtitle">ğŸ”§ åŸºæœ¬åˆä½µæµç¨‹ï¼ˆBlobï¼‰</h3>
          <div class="diagram-container">
            <svg viewBox="0 0 900 300" xmlns="http://www.w3.org/2000/svg">
              <!-- è¼¸å…¥ -->
              <rect x="50" y="50" width="120" height="60" fill="#e3f2fd" stroke="#333" stroke-width="2" rx="5" />
              <text x="110" y="75" text-anchor="middle" font-size="11">AudioChunk 1</text>
              <text x="110" y="95" text-anchor="middle" font-size="11">Base64</text>

              <rect x="50" y="130" width="120" height="60" fill="#e3f2fd" stroke="#333" stroke-width="2" rx="5" />
              <text x="110" y="155" text-anchor="middle" font-size="11">AudioChunk 2</text>
              <text x="110" y="175" text-anchor="middle" font-size="11">Base64</text>

              <rect x="50" y="210" width="120" height="60" fill="#e3f2fd" stroke="#333" stroke-width="2" rx="5" />
              <text x="110" y="235" text-anchor="middle" font-size="11">AudioChunk N</text>
              <text x="110" y="255" text-anchor="middle" font-size="11">Base64</text>

              <!-- è™•ç† -->
              <rect x="250" y="90" width="140" height="60" fill="#e3f2fd" stroke="#333" stroke-width="2" rx="5" />
              <text x="320" y="125" text-anchor="middle" font-size="13">Base64 è§£ç¢¼</text>

              <rect x="450" y="90" width="140" height="60" fill="#f3e5f5" stroke="#333" stroke-width="2" rx="5" />
              <text x="520" y="125" text-anchor="middle" font-size="13">è½‰æ›ç‚º Blob</text>

              <rect x="650" y="90" width="140" height="60" fill="#f3e5f5" stroke="#333" stroke-width="2" rx="5" />
              <text x="720" y="125" text-anchor="middle" font-size="13">åˆä½µæ‰€æœ‰ Blob</text>

              <!-- è¼¸å‡º -->
              <rect x="450" y="190" width="140" height="60" fill="#e8f5e8" stroke="#333" stroke-width="2" rx="5" />
              <text x="520" y="215" text-anchor="middle" font-size="12">WebM</text>
              <text x="520" y="235" text-anchor="middle" font-size="12">éŸ³è¨Šæª”æ¡ˆ</text>

              <!-- é€£æ¥ç·š -->
              <line x1="170" y1="80" x2="250" y2="120" stroke="#333" stroke-width="2" marker-end="url(#arrow9)" />
              <line x1="170" y1="160" x2="250" y2="120" stroke="#333" stroke-width="2" marker-end="url(#arrow9)" />
              <line x1="170" y1="240" x2="250" y2="120" stroke="#333" stroke-width="2" marker-end="url(#arrow9)" />

              <line x1="390" y1="120" x2="450" y2="120" stroke="#333" stroke-width="2" marker-end="url(#arrow9)" />
              <line x1="590" y1="120" x2="650" y2="120" stroke="#333" stroke-width="2" marker-end="url(#arrow9)" />
              <line x1="720" y1="150" x2="720" y2="220" stroke="#333" stroke-width="2" />
              <line x1="720" y1="220" x2="590" y2="220" stroke="#333" stroke-width="2" marker-end="url(#arrow9)" />

              <defs>
                <marker id="arrow9" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                  <polygon points="0 0, 10 3, 0 6" fill="#333" />
                </marker>
              </defs>

              <!-- æ¨™ç±¤ -->
              <text x="50" y="30" font-size="13" font-weight="bold" fill="#666">è¼¸å…¥</text>
              <text x="250" y="30" font-size="13" font-weight="bold" fill="#666">è™•ç†</text>
              <text x="450" y="280" font-size="13" font-weight="bold" fill="#666">è¼¸å‡º - æª”æ¡ˆè¼ƒå°ï¼Œå£“ç¸®æ ¼å¼</text>
            </svg>
          </div>
        </div>

        <!-- Section 10: ä½¿ç”¨è€…æ“ä½œæµç¨‹åœ– -->
        <div class="diagram-section">
          <h2 class="diagram-title">ğŸ‘¤ ä½¿ç”¨è€…æ“ä½œæµç¨‹åœ–</h2>
          <div class="diagram-container">
            <svg viewBox="0 0 1000 600" xmlns="http://www.w3.org/2000/svg">
              <!-- é–‹å§‹ -->
              <ellipse cx="500" cy="50" rx="80" ry="30" fill="#e3f2fd" stroke="#333" stroke-width="2" />
              <text x="500" y="55" text-anchor="middle" font-size="13">ä½¿ç”¨è€…é€²å…¥é é¢</text>

              <!-- ç€è¦½å™¨ç›¸å®¹æ€§ -->
              <path d="M 500 100 L 570 130 L 500 160 L 430 130 Z" fill="#fff3e0" stroke="#333" stroke-width="2" />
              <text x="500" y="135" text-anchor="middle" font-size="11">ç€è¦½å™¨ç›¸å®¹</text>

              <!-- WebSocket é€£ç·š -->
              <path d="M 500 180 L 570 210 L 500 240 L 430 210 Z" fill="#fff3e0" stroke="#333" stroke-width="2" />
              <text x="500" y="215" text-anchor="middle" font-size="11">WebSocket é€£ç·š</text>

              <!-- è«‹æ±‚æ¬Šé™ -->
              <rect x="440" y="260" width="120" height="50" fill="#e3f2fd" stroke="#333" stroke-width="2" rx="5" />
              <text x="500" y="290" text-anchor="middle" font-size="11">è«‹æ±‚éº¥å…‹é¢¨æ¬Šé™</text>

              <!-- æ¬Šé™åˆ¤æ–· -->
              <path d="M 500 330 L 570 360 L 500 390 L 430 360 Z" fill="#fff3e0" stroke="#333" stroke-width="2" />
              <text x="500" y="365" text-anchor="middle" font-size="11">æ¬Šé™æˆäºˆ</text>

              <!-- é¡¯ç¤ºä»‹é¢ -->
              <rect x="440" y="410" width="120" height="50" fill="#e8f5e8" stroke="#333" stroke-width="2" rx="5" />
              <text x="500" y="440" text-anchor="middle" font-size="11">é¡¯ç¤ºæ“ä½œä»‹é¢</text>

              <!-- ä½¿ç”¨è€…æ“ä½œåˆ¤æ–· -->
              <path d="M 500 480 L 570 510 L 500 540 L 430 510 Z" fill="#fff3e0" stroke="#333" stroke-width="2" />
              <text x="500" y="515" text-anchor="middle" font-size="11">ä½¿ç”¨è€…æ“ä½œ</text>

              <!-- é–‹å§‹éŒ„éŸ³ -->
              <rect x="200" y="560" width="100" height="40" fill="#e8f5e8" stroke="#333" stroke-width="2" rx="5" />
              <text x="250" y="585" text-anchor="middle" font-size="11">é–‹å§‹éŒ„éŸ³</text>

              <!-- æ¸¬è©¦è¨­å‚™ -->
              <rect x="340" y="560" width="100" height="40" fill="#e3f2fd" stroke="#333" stroke-width="2" rx="5" />
              <text x="390" y="585" text-anchor="middle" font-size="11">æ¸¬è©¦è¨­å‚™</text>

              <!-- æŸ¥çœ‹èªªæ˜ -->
              <rect x="480" y="560" width="100" height="40" fill="#e3f2fd" stroke="#333" stroke-width="2" rx="5" />
              <text x="530" y="585" text-anchor="middle" font-size="11">æŸ¥çœ‹èªªæ˜</text>

              <!-- é€£æ¥ç·š -->
              <line x1="500" y1="80" x2="500" y2="100" stroke="#333" stroke-width="2" marker-end="url(#arrow10)" />
              <line x1="500" y1="160" x2="500" y2="180" stroke="#333" stroke-width="2" marker-end="url(#arrow10)" />
              <line x1="500" y1="240" x2="500" y2="260" stroke="#333" stroke-width="2" marker-end="url(#arrow10)" />
              <line x1="500" y1="310" x2="500" y2="330" stroke="#333" stroke-width="2" marker-end="url(#arrow10)" />
              <line x1="500" y1="390" x2="500" y2="410" stroke="#333" stroke-width="2" marker-end="url(#arrow10)" />
              <line x1="500" y1="460" x2="500" y2="480" stroke="#333" stroke-width="2" marker-end="url(#arrow10)" />

              <line x1="430" y1="510" x2="250" y2="510" stroke="#333" stroke-width="2" />
              <line x1="250" y1="510" x2="250" y2="560" stroke="#333" stroke-width="2" marker-end="url(#arrow10)" />

              <line x1="470" y1="510" x2="390" y2="510" stroke="#333" stroke-width="2" />
              <line x1="390" y1="510" x2="390" y2="560" stroke="#333" stroke-width="2" marker-end="url(#arrow10)" />

              <line x1="500" y1="540" x2="530" y2="560" stroke="#333" stroke-width="2" marker-end="url(#arrow10)" />

              <defs>
                <marker id="arrow10" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                  <polygon points="0 0, 10 3, 0 6" fill="#333" />
                </marker>
              </defs>
            </svg>
          </div>
        </div>

        <!-- Legend -->
        <div class="legend">
          <h4>ğŸ¨ é¡è‰²ç·¨ç¢¼èªªæ˜</h4>
          <div class="legend-items">
            <div class="legend-item">
              <div class="color-box" style="background: #ff9999"></div>
              <span>éŒ¯èª¤ã€åœæ­¢ã€è­¦å‘Š</span>
            </div>
            <div class="legend-item">
              <div class="color-box" style="background: #fff3e0"></div>
              <span>æš«åœã€ç­‰å¾…ã€è™•ç†ä¸­</span>
            </div>
            <div class="legend-item">
              <div class="color-box" style="background: #e3f2fd"></div>
              <span>æ­£å¸¸æµç¨‹ã€è³‡æ–™è™•ç†</span>
            </div>
            <div class="legend-item">
              <div class="color-box" style="background: #e8f5e8"></div>
              <span>æˆåŠŸã€å®Œæˆã€å•Ÿå‹•</span>
            </div>
          </div>
        </div>
      </div>

      <div class="footer">
        <p>ğŸµ POC éŸ³è¨ŠéŒ„è£½èˆ‡ WebSocket å³æ™‚å‚³è¼¸ç³»çµ± | å®Œæ•´æŠ€è¡“æ–‡æª”</p>
        <p style="margin-top: 10px; opacity: 0.8">åŒ…å«è³‡æ–™æ ¼å¼å®šç¾©ã€æµç¨‹èªªæ˜ã€é—œéµç­–ç•¥èˆ‡å®Œæ•´è¦–è¦ºåŒ–åœ–è¡¨</p>
      </div>
    </div>

    <script>
      function showSection(index) {
        const sections = document.querySelectorAll('.diagram-section')
        sections.forEach((section) => section.classList.remove('active'))
        sections[index].classList.add('active')

        const buttons = document.querySelectorAll('.nav-btn')
        buttons.forEach((btn) => btn.classList.remove('active'))
        buttons[index].classList.add('active')

        window.scrollTo({ top: 0, behavior: 'smooth' })
      }

      // éµç›¤å°èˆª
      document.addEventListener('keydown', (e) => {
        const sections = document.querySelectorAll('.diagram-section')
        const currentIndex = Array.from(sections).findIndex((s) => s.classList.contains('active'))

        if (e.key === 'ArrowRight' && currentIndex < sections.length - 1) {
          showSection(currentIndex + 1)
        } else if (e.key === 'ArrowLeft' && currentIndex > 0) {
          showSection(currentIndex - 1)
        }
      })

      // æœç´¢åŠŸèƒ½
      document.addEventListener('keydown', (e) => {
        if ((e.ctrlKey || e.metaKey) && e.key === 'f') {
          e.preventDefault()
          const searchTerm = prompt('æœå°‹é—œéµå­—ï¼š')
          if (searchTerm) {
            const elements = document.querySelectorAll('.diagram-section')
            for (let i = 0; i < elements.length; i++) {
              if (elements[i].textContent.toLowerCase().includes(searchTerm.toLowerCase())) {
                showSection(i)
                break
              }
            }
          }
        }
      })
    </script>
  </body>
</html>
